/*
DayPilot Lite
Copyright (c) 2005 - 2025 Annpoint s.r.o.
https://www.daypilot.org/
Licensed under Apache Software License 2.0
Version: 2025.4.757-lite
*/
"use strict";!function(DayPilot){function t(t){var e=t.touches[0].pageX,i=t.touches[0].pageY,n={};return n.x=e,n.y=i,n}if("undefined"==typeof DayPilot.Scheduler){var e={},i=function(){},n=!1,s=function(){return document.body},r=function(){return document.createElement("div")};DayPilot.Scheduler=function(n,a){this.v="${v}";var o=this;this.isScheduler=!0,this.id=n,this.beforeCellRenderCaching=!0,this.businessBeginsHour=9,this.businessEndsHour=18,this.businessWeekends=!1,this.cellDuration=60,this.cellGroupBy="Day",this.cellSweeping=!0,this.cellSweepingCacheSize=1e3,this.cellWidth=40,this.cellsMarkBusiness=!0,this.cssClassPrefix="scheduler_default",this.days=1,this.durationBarHeight=3,this.durationBarVisible=!0,this.dynamicEventRendering="Progressive",this.dynamicEventRenderingMargin=50,this.dynamicEventRenderingMarginX=null,this.dynamicEventRenderingMarginY=null,this.dynamicEventRenderingCacheSweeping=!1,this.dynamicEventRenderingCacheSize=200,this.eventBorderRadius=null,this.eventEndSpec="DateTime",this.eventHeight=35,this.eventMinWidth=1,this.eventPadding=null,this.eventResizeMargin=5,this.eventTapAndHoldHandling="Move",this.eventTextWrappingEnabled=!1,this.eventsLoadMethod="GET",this.floatingEvents=!DayPilot.browser.ios,this.floatingTimeHeaders=!0,this.headerHeight=30,this.heightSpec="Max",this.height=600,this.locale="en-us",this.progressiveRowRendering=!0,this.progressiveRowRenderingPreload=25,this.rowHeaderWidth=80,this.rowMarginTop=0,this.rowMarginBottom=0,this.rowsLoadMethod="GET",this.scale="CellDuration",this.scrollDelayEvents=200,this.scrollDelayCells=DayPilot.browser.ios?100:0,this.scrollDelayFloats=0,this.scrollDelayRows=0,this.showToolTip=!0,this.snapToGrid=!0,this.startDate=DayPilot.Date.today(),this.tapAndHoldTimeout=300,this.timeHeaders=[{"groupBy":"Default"},{"groupBy":"Cell"}],this.timeHeaderTextWrappingEnabled=!1,this.timeFormat="Auto",this.useEventBoxes="Always",this.visible=!0,this.weekStarts="Auto",this.width=null,this.xssProtection="Enabled",this.eventClickHandling="Enabled",this.eventDeleteHandling="Disabled",this.eventMoveHandling="Update",this.eventResizeHandling="Update",this.eventRightClickHandling="ContextMenu",this.timeHeaderClickHandling="Enabled",this.timeHeaderRightClickHandling="Enabled",this.timeRangeClickHandling="Enabled",this.timeRangeSelectedHandling="Enabled",this.onEventClick=null,this.onEventClicked=null,this.onEventMove=null,this.onEventMoved=null,this.onEventResize=null,this.onEventResized=null,this.onRowClick=null,this.onRowClicked=null,this.onTimeHeaderClick=null,this.onTimeHeaderClicked=null,this.onTimeHeaderRightClick=null,this.onTimeHeaderRightClicked=null,this.onTimeRangeClick=null,this.onTimeRangeClicked=null,this.onTimeRangeSelect=null,this.onTimeRangeSelected=null,this.onBeforeCellRender=null,this.onBeforeEventRender=null,this.onBeforeRowHeaderRender=null,this.onBeforeTimeHeaderRender=null,this.onAfterUpdate=null,this.a=!1,this.b=-1,this.c=!0,this.rowlist=[],this.events={},this.cells={},this.elements={},this.elements.events=[],this.elements.bars=[],this.elements.text=[],this.elements.cells=[],this.elements.linesVertical=[],this.elements.range=[],this.elements.timeHeader=[],this.d={},this.d.cells=[],this.d.linesVertical={},this.d.linesHorizontal={},this.d.timeHeaderGroups=[],this.d.timeHeader={},this.d.events=[],this.nav={},this.f={};var l=this.f;this.g={};var d=o.g;this.j={};var c=this.j,h={};this.scrollTo=function(t){o.k(t)},this.k=function(t){if(t){if(!o.l)return void(o.m=t);var e;if(t instanceof DayPilot.Date)e=this.getPixels(t).left;else if("string"==typeof t)e=this.getPixels(new DayPilot.Date(t)).left;else{if("number"!=typeof t)throw new DayPilot.Exception("Invalid scrollTo() parameter. Accepted parameters: string (ISO date), number (pixels), DayPilot.Date object");e=t}var i=o.n.clientWidth,n=o.nav.scroll.clientWidth;e<0&&(e=0),e>i-n&&(e=i-n),o.o(e)}},this.scrollToResource=function(t){DayPilot.complete(function(){var e;if("string"==typeof t||"number"==typeof t)e=o.p(t);else{if(!(t instanceof DayPilot.Row))throw new DayPilot.Exception("Invalid scrollToResource() argument: id or DayPilot.Row expected");e=o.p(t.id)}e&&setTimeout(function(){var t=e.top;o.nav.scroll.scrollTop=t},100)})},this.q=function(){if(this.floatingTimeHeaders&&this.timeHeader){var t=o.r();if(t){o.s();for(var e=t.pixels.left,i=t.pixels.right+t.sw,n=[],s=0;s<this.timeHeader.length;s++)for(var r=0;r<this.timeHeader[s].length;r++){var a=this.timeHeader[s][r],l=a.left,d=a.left+a.width,c=null;if(l<e&&e<d&&(c={},c.x=r,c.y=s,c.marginLeft=e-l,c.marginRight=0,c.div=o.d.timeHeader[r+"_"+s],n.push(c)),l<i&&i<d){c||(c={},c.x=r,c.y=s,c.marginLeft=0,c.div=o.d.timeHeader[r+"_"+s],n.push(c)),c.marginRight=d-i;break}}for(var h=0;h<n.length;h++){var c=n[h];o.t(c.div,c.marginLeft,c.marginRight)}o.u()}}},this.z=function(){o.q(),o.A()},this.B={};var u=o.B;u.C=function(t,e,i,n){var s=t,r=t+i,a=e,l=e+n;return o.elements.events.filter(function(t){var e=t.event,i=e.part.left,n=e.part.left+e.part.width,d=o.rowlist[e.part.dayIndex],c=d.top+e.part.top,h=c+o.eventHeight;if(DayPilot.Util.overlaps(i,n,s,r)&&DayPilot.Util.overlaps(c,h,a,l))return!0})},u.D=function(){var t=[],e=o.r();if(!e)return t;for(var i=e.pixels.left,n=0;n<o.elements.events.length;n++){var s=o.elements.events[n],r=s.event,a=r.part.left,l=r.part.left+r.part.width;a<i&&i<l&&t.push(s)}return t.area=e,t},this.A=function(){if(this.floatingEvents){var t=u.D();o.E=performance.now(),t.forEach(function(e){var i=e.event,n=t.area.pixels.left,s=i.part.left,r=n-s;o.F(e,r,0)}),o.G()}},this.elements.sections=[],this.elements.hsections=[],this.t=function(t,e,i){var n;if(t.section){var s=t.section;return s.style.left=e+"px",s.style.right=i+"px",void(t.H=!1)}var a=r();a.className=o.I("_timeheader_float"),a.style.position="absolute",a.style.left=e+"px",a.style.right=i+"px",a.style.top="0px",a.style.bottom="0px",a.style.overflow="hidden";var l=r();l.className=o.I("_timeheader_float_inner"),t.J=l;var d=t.cell.th,c=!0,h=null===(n=t.domArgs)||void 0===n?void 0:n.element;if(h){var u=l;if(DayPilot.Util.isReactComponent(h)){if(!o.K.reactDOM)throw new DayPilot.Exception("Can't reach ReactDOM");o.K.L(h,u),c=!1}}if(c&&(l.innerHTML=o.M(d.text,d.innerHTML)),d.fontColor&&(l.style.color=d.fontColor),a.appendChild(l),a.N={marginLeft:e,marginRight:i},t.section=a,t.insertBefore(a,t.firstChild.nextSibling),h){var v=t.firstChild&&t.firstChild.firstChild;v&&setTimeout(function(){v.style.display="none"},0)}else t.firstChild.innerHTML="";this.elements.hsections.push(t)},this.s=function(){for(var t=0;t<this.elements.hsections.length;t++){this.elements.hsections[t].H=!0}},this.u=function(){for(var t=[],e=0;e<this.elements.hsections.length;e++){var i=this.elements.hsections[e];if(i.H){var n=i.cell;if(n&&i.firstChild)if(i.domArgs&&i.domArgs.element){var s=i.firstChild&&i.firstChild.firstChild;s&&(s.style.display="");var r=o.K.reactDOM&&DayPilot.Util.isReactComponent(i.domArgs.element);if(r){var a=i.J;o.K.O(a)}}else i.firstChild.innerHTML=o.M(n.th.text,n.th.innerHTML);DayPilot.de(i.section),i.section=null,i.H=!1}else t.push(i)}this.elements.hsections=t},this.F=function(t,e,i){var n=t.section;if(n)return n.N&&n.N.marginLeft===e&&n.N.marginRight===i?void(n.N.stamp=o.E):(t.section.style.left=e+"px",t.section.style.right=i+"px",void(n.N={marginLeft:e,marginRight:i,stamp:o.E}));n=r(),n.className=o.I("_event_float"),n.style.position="absolute",n.style.left=e+"px",n.style.right=i+"px",n.style.top="0px",n.style.bottom="0px",n.style.overflow="hidden";var s=r();s.className=o.I("_event_float_inner"),s.innerHTML=t.event.client.html(),n.appendChild(s),n.N={marginLeft:e,marginRight:i,stamp:o.E},t.section=n,t.insertBefore(n,t.firstChild.nextSibling),t.firstChild.innerHTML="";var a=t.event,l=a.cache||a.data;l.fontColor&&(s.style.color=l.fontColor),this.elements.sections.push(t)},this.G=function(){for(var t=[],e=0;e<this.elements.sections.length;e++){var i=this.elements.sections[e];if(i.section&&i.section.N&&i.section.N.stamp===o.E)t.push(i);else{var n=i.event;n&&(i.firstChild.innerHTML=n.client.html()),DayPilot.de(i.section),i.section=null}}this.elements.sections=t},this.setScrollX=function(t){o.P.enabled?(o.P.scrollXRequested=t,setTimeout(function(){var t=o.P.scrollXRequested;"number"==typeof t&&o.o(t)},0)):o.o(t)},this.o=function(t){var e=o.nav.scroll,i=o.Q();e.clientWidth+t>i&&(t=i-e.clientWidth),o.divTimeScroll.scrollLeft=t,e.scrollLeft=t},this.setScrollY=function(t){o.P.enabled?(o.P.scrollYRequested=t,setTimeout(function(){var t=o.P.scrollYRequested;"number"==typeof t&&o.R(t)},0)):o.R(t)},this.R=function(t){var e=o.nav.scroll,i=o.b;e.clientHeight+t>i&&(t=i-e.clientHeight),o.divResScroll.scrollTop=t,e.scrollTop=t},this.setScroll=function(t,e){o.setScrollX(t),o.setScrollY(e)},this.S=function(){if(this.nav.scroll){!function(){var t=o.Q();o.n.style.height=o.b+"px",o.n.style.width=t+"px",t>o.nav.scroll.clientWidth?o.nav.scroll.style.overflowX="auto":o.nav.scroll.style.overflowX="hidden"}();var t=1;this.nav.scroll.style.height="30px";var e=this.T(),i=e+this.U()+t;if(e>=0&&(this.nav.scroll.style.height=e+"px",this.V.style.height=e+"px"),this.nav.divider&&((!i||isNaN(i)||i<0)&&(i=0),this.nav.divider.style.height=i+"px"),this.nav.top.style.height=i+"px",o.nav.resScrollSpace){var n=30;"Auto"===o.heightSpec&&(n=DayPilot.sh(o.nav.scroll)),o.nav.resScrollSpace.style.height=n+"px"}for(var s=0;s<this.elements.linesVertical.length;s++)this.elements.linesVertical[s].style.height=this.b+"px"}},this.W=function(){this.startDate=new DayPilot.Date(this.startDate).getDatePart(),this.timeHeader=[];var t=this.timeHeaders;t||(t=[{"groupBy":this.cellGroupBy},{"groupBy":"Cell"}]);for(var e=o.startDate.addDays(o.days),i=0;i<t.length;i++){var n=t[i].groupBy,s=t[i].format;"Default"===n&&(n=this.cellGroupBy);for(var r=[],a=o.startDate;a.ticks<e.ticks;){var d={};if(d.start=a,d.end=this.X(d.start,n),d.start.ticks===d.end.ticks)break;d.left=this.getPixels(d.start).left;var c=this.getPixels(d.end).left,h=c-d.left;if(d.width=h,"string"==typeof s?d.text=d.start.toString(s,l.Y()):d.text=this.Z(d,n),h>0){if("function"==typeof this.onBeforeTimeHeaderRender){var u={};u.start=d.start,u.end=d.end,u.text=d.text,u.html=null,u.toolTip=o.M(d.text),u.backColor=null,u.fontColor=null,u.level=this.timeHeader.length,u.cssClass=null;var v={};v.header=u,v.control=o,this.onBeforeTimeHeaderRender(v),d.text=u.text,d.html=u.html,d.backColor=u.backColor,d.fontColor=u.fontColor,d.toolTip=u.toolTip,d.areas=u.areas,d.cssClass=u.cssClass}r.push(d)}a=d.end}this.timeHeader.push(r)}},this.getPixels=function(t){var e=t.ticks-this.startDate.ticks,i=o._(e),n=o.cellWidth,s=Math.floor(i/n),r=s*n;r=r<0?0:r;var a=r+n;i%n===0&&(a=r);var l=o.Q();return a=a>l?l:a,{left:i,boxLeft:r,boxRight:a,i:s}},this.getDate=function(t,e,i){var n=this.aa(t,i);if(!n)return null;var s=n.x,r=o.ba(s);if(!r)return null;var a=i&&!e?r.end:r.start;return e?a.addTime(this.ca(n.offset)):a},this.aa=function(t,e){e&&(t-=1);var i=Math.floor(t/o.cellWidth),n=o.ba(i);if(!n)return null;var s={};return s.x=i,s.offset=t%o.cellWidth,s.cell=n,s},this.da=function(t){var e=t.ticks-this.startDate.ticks,i=60*o.ea()*1e3;if(e<0)return{past:!0};var n=Math.floor(e/i);return{i:n,current:o.ba(n)}},this._=function(t){var e=60*o.ea()*1e3,i=o.cellWidth;return Math.floor(i*t/e)},this.ca=function(t){var e=60*o.ea()*1e3,i=o.cellWidth;return Math.floor(t/i*e)},this.fa=function(t){DayPilot.Global.touch.start||e.ga||(o.ha={},o.ia(this,t))},this.ia=function(t,e){t.event&&o.ja(t,e)},this.ka=function(t){if(!DayPilot.Global.touch.active&&!DayPilot.Global.touch.start){var e=this.event;if(t.cancelBubble=!0,t.preventDefault(),!this.event.client.rightClickEnabled())return!1;o.la(t);var i={};if(i.e=e,i.div=this,i.originalEvent=t,i.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof o.onEventRightClick&&(o.onEventRightClick(i),i.preventDefault.value))return!1;switch(o.eventRightClickHandling){case"ContextMenu":var n=e.client.contextMenu();n?n.show(e):o.contextMenu&&o.contextMenu.show(this.event)}return"function"==typeof o.onEventRightClicked&&o.onEventRightClicked(i),!1}},this.ba=function(t){var e=o.ea(),i=60*e*1e3;return{start:o.startDate.addTime(t*i),end:o.startDate.addTime((t+1)*i),left:t*o.cellWidth,width:o.cellWidth}},this.ja=function(t,e){if("boolean"==typeof e)throw new DayPilot.Exception("Invalid _eventClickSingle parameters");var i=t.event;if(i){var n=e.ctrlKey,s=e.metaKey;if(i.client.clickEnabled()){o.la(e);var r={};r.e=i,r.control=o,r.div=t,r.originalEvent=e,r.ctrl=n,r.meta=s,r.shift=e.shiftKey,r.preventDefault=function(){this.preventDefault.value=!0},r.toJSON=function(){return DayPilot.Util.copyProps(r,{},["e","ctrl","meta","shift"])},"function"==typeof o.onEventClick&&(o.onEventClick(r),r.preventDefault.value)||"function"==typeof o.onEventClicked&&o.onEventClicked(r)}}},this.ma=function(t){var e={};if(e.e=t,e.preventDefault=function(){this.preventDefault.value=!0},e.control=o,e.toJSON=function(){return DayPilot.Util.copyProps(e,{},["e"])},"function"!=typeof o.onEventDelete||(o.onEventDelete(e),!e.preventDefault.value)){switch(o.eventDeleteHandling){case"Update":o.events.remove(t)}"function"==typeof o.onEventDeleted&&o.onEventDeleted(e)}},this.getScrollX=function(){return this.nav.scroll.scrollLeft},this.getScrollY=function(){return this.nav.scroll.scrollTop},this.na=function(t,e,i,n){function s(){if(!r.preventDefault.value){switch(r.loaded={},e=r.newStart,i=r.newEnd,o.eventResizeHandling){case"Update":o.pa(r)}"function"==typeof o.onEventResized&&o.onEventResized(r)}}if("Disabled"!==this.eventResizeHandling){i=o.oa(i);var r={};r.e=t,r.async=!1,r.loaded=function(){s()},r.newStart=e,r.newEnd=i,r.what=n,r.preventDefault=function(){this.preventDefault.value=!0},r.control=o,r.toJSON=function(){return DayPilot.Util.copyProps(r,{},["e","async","newStart","newEnd"])},"function"==typeof o.onEventResize&&o.onEventResize(r),r.async||s()}},this.qa=function(t){t=t||{},clearTimeout(o.ra),o.timeHeader=null,o.cellProperties={},o.W(),o.sa(),o.events.ta(),o.f.va(),o.clearSelection(),o.wa(),o.xa(),o.ya(),o.za(),o.Aa(),o.Ba(),o.Ca(),o.Da(),o.Ea(),o.Fa(),o.Ga={},o.Ha(),o.S(),o.Ia(),t.immediateEvents?o.Ja():setTimeout(function(){o.Ja()},100),this.visible?o.c!==o.visible&&this.show():this.hide(),this.c=this.visible,this.z(),o.Ka(),this.La()},this.La=function(){if("function"==typeof o.onAfterUpdate){var t={};o.onAfterUpdate(t)}},this.update=function(t){if(!o.l)throw new DayPilot.Exception("You are trying to update a DayPilot.Scheduler object that hasn't been initialized.");if(o.a)throw new DayPilot.Exception("You are trying to update a DayPilot.Scheduler object that has been disposed already. Calling .dispose() destroys the object and makes it unusable.");h.request(t)},h.timeout=null,h.options=null,h.enabled=!1,h.request=function(t){h.enabled?(clearTimeout(h.timeout),h.Ma(t),h.timeout=setTimeout(h.doit)):(h.Ma(t),h.doit())},h.Ma=function(t){if(t){h.options||(h.options={});for(var e in t)h.options[e]=t[e]}},h.doit=function(){var t=h.options;return h.options=null,o.l?(o.Na(t),o.qa({"immediateEvents":!0}),void o.Oa()):void o.Na(t)},this.Pa=function(t){t.forEach(function(t){o.Qa(t.index)})},this.Ra=function(t){return t&&0!==t.length?t[0].isRow?t:t.map(function(t){return o.rowlist[t]}):[]},this.Sa=function(t,e,i){t=DayPilot.ua(t),t=o.Ra(t),o.Pa(t),this.Ta?(this.xa(),this.Ba(),this.Fa(),t.forEach(function(t){o.Ua(t.index)}),t.forEach(function(t){o.Va(t.index)}),this.Ia(),this.Wa()):(t.forEach(function(t){e||o.Ua(t.index),o.Va(t.index)}),t.forEach(function(t){o.Xa(t.index)}),o.Ia()),o.A(),i&&i(),this.Ha()},this.oa=function(t){return"DateTime"===o.eventEndSpec?t:t.getDatePart().ticks===t.ticks?t.addDays(-1):t.getDatePart()},this.Ya=function(t){return"DateTime"===o.eventEndSpec?t:t.getDatePart().addDays(1)},this.Za=function(t){return"DateTime"===o.eventEndSpec?t:t.getDatePart()},this.$a=function(t,e,i,n,s){if(o._a=null,"Disabled"!==o.eventMoveHandling){i=o.oa(i);var r={};r.e=t,r.newStart=e,r.newEnd=i,r.newResource=n,r.ctrl=!1,r.meta=!1,r.shift=!1,s&&(r.shift=s.shiftKey,r.ctrl=s.ctrlKey,r.meta=s.metaKey),r.control=o,r.areaData=DayPilot.Global.movingAreaData,r.toJSON=function(){return DayPilot.Util.copyProps(r,{},["e","newStart","newEnd","newResource","ctrl","meta","shift"])},r.preventDefault=function(){this.preventDefault.value=!0};var a=function(){if(r.loaded=function(){},r.preventDefault.value)return void o.ab();switch(e=r.newStart,i=r.newEnd,o.eventMoveHandling){case"Update":o.pa(r)}o.ab(),"function"==typeof o.onEventMoved&&o.onEventMoved(r)};r.async=!1,r.loaded=function(){a()},"function"==typeof o.onEventMove&&o.onEventMove(r),r.async||a()}},this.pa=function(t){var e=t.e,i=t.newStart,n=t.newEnd,s=t.newResource;e.start(i),e.end(n),e.resource(s),o.events.update(e),o.events.bb()},this.cb=function(t){if(t)if(t.args)o.db(t.args.start,t.args.end,t.args.resource);else{var e=o.eb(t);if(!e)return;o.db(e.start,e.end,e.resource)}},this.db=function(t,e,i){if("Disabled"!==o.timeRangeSelectedHandling){var n=e;e=o.oa(n);var s={};if(s.control=o,s.start=t,s.end=e,s.resource=i,s.preventDefault=function(){this.preventDefault.value=!0},s.toJSON=function(){return DayPilot.Util.copyProps(s,{},["start","end","resource"])},"function"==typeof o.onTimeRangeSelect){if(o.onTimeRangeSelect(s),s.preventDefault.value)return;t=s.start,e=s.end}e=o.Ya(e),o.fb(o.gb,t,e),o.hb(o.gb),"function"==typeof o.onTimeRangeSelected&&o.onTimeRangeSelected(s)}},this.fb=function(t,e,i){if(t){var n,s=i;e.getTime()<o.startDate.getTime()?(t.start.x=0,t.start.time=o.startDate.getTime()):(n=o.da(e),t.start.x=n.i,t.start.time=e);var r=o.startDate.addDays(o.days);s.getTime()>r.getTime()?(t.end.x=o.ib(),t.end.time=r.getTime()):(n=o.da(s.addMilliseconds(-1)),t.end.x=n.i,t.end.time=i)}},this.jb=function(t,e){o.kb(t,e)},this.kb=function(t,e){var i={};i.resource=t,i.row=t,i.ctrl=e.ctrlKey,i.shift=e.shiftKey,i.meta=e.metaKey,i.originalEvent=e,i.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof o.onRowClick&&(o.onRowClick(i),i.preventDefault.value)||"function"==typeof o.onRowClicked&&o.onRowClicked(i)},this.lb=function(t){var e={};e.header=t,e.control=o,e.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof o.onTimeHeaderClick&&(o.onTimeHeaderClick(e),e.preventDefault.value)||"function"==typeof o.onTimeHeaderClicked&&o.onTimeHeaderClicked(e)},this.getViewport=function(){var t=this.nav.scroll.scrollLeft,e=this.nav.scroll.scrollTop,i={},n=o.mb(t,e),s=o.nb(n),r=o.ba(n.start.x),a=o.ba(n.end.x);return i.start=o.getDate(t,!0),i.end=o.getDate(t+o.nav.scroll.clientWidth,!0,!0),i.resources=s,r&&(i.topLeft={"start":r.start,"end":r.end,x:n.start.x,y:n.start.y,"resource":s[0]}),a&&(i.bottomRight={"start":a.start,"end":a.end,x:n.end.x,y:n.end.y,"resource":s[s.length-1]}),i.rows=function(){return i.resources.map(function(t){return o.rows.find(t)})},i.events=function(){var t=[];return i.rows().forEach(function(e){t=t.concat(e.events.forRange(i.start,i.end))}),t},i},this.mb=function(t,e){var i={};i.start={},i.end={};var n=o.aa(t),s=o.aa(t+o.nav.scroll.clientWidth);n&&(i.start.x=n.x),s&&(i.end.x=s.x);var r=e,a=e+o.nav.scroll.clientHeight;i.start.y=o.ob(r).i,i.end.y=o.ob(a).i,i.start.x=DayPilot.Util.atLeast(i.start.x,0);var l=o.ib();return i.end.x>=l&&(i.end.x=l-1),i},this.nb=function(t){t||(t=this.mb(this.nav.scroll.scrollLeft,this.nav.scroll.scrollTop));var e=[];e.ignoreToJSON=!0;for(var i=t.start.y;i<=t.end.y;i++){var n=o.rowlist[i];n&&e.push(n.id)}return e},this.I=function(t){var e=this.theme||this.cssClassPrefix;return e?e+t:""},this.za=function(){o.nav.top.className!==o.I("_main")&&(o.nav.top.className=o.I("_main"),o.nav.dh1.className=o.I("_divider_horizontal"),o.nav.dh2.className=o.I("_divider_horizontal"),o.divResScroll.className=o.I("_rowheader_scroll"),o.nav.divider.className=o.I("_divider")+" "+o.I("_splitter"),o.nav.scroll.className=o.I("_scrollable"),o.n.className=o.I("_matrix")+" "+o.I("_grid_main"))},this.pb=function(){this.nav.top.dispose=this.dispose},this.dispose=function(){var t=o;if(t.l&&!t.a){t.a=!0;for(var i in t.qb){var n=t.qb[i];DayPilot.isArray(n)?n.forEach(function(t){clearTimeout(t)}):clearTimeout(n)}t.Ea(),t.divCells=null,t.divCorner=null,t.divEvents=null,t.divHeader&&(t.divHeader.rows=null),t.divHeader=null,t.divLines=null,t.divNorth=null,t.divRange=null,t.divResScroll=null,t.divStretch=null,t.divTimeScroll=null,t.V=null,t.n.calendar=null,t.n=null,t.nav.top.onmousemove=null,t.nav.top.onmouseout=null,t.nav.top.dispose=null,t.nav.top.ontouchstart=null,t.nav.top.ontouchmove=null,t.nav.top.ontouchend=null,t.nav.top.removeAttribute("style"),t.nav.top.removeAttribute("class"),t.nav.top.innerHTML="",t.nav.top.dp=null,t.nav.top=null,t.nav.scroll.onscroll=null,t.nav.scroll.root=null,t.nav.scroll=null,e.rb(t),c=null}},this.disposed=function(){return o.a},this.sb=function(t){var e=null;e=t.nodeType?t.event:t;var i=o.eventBorderRadius;"number"==typeof i&&(i+="px");var n=o.tb(e),s=o.rowlist,a=o.eventHeight,l=e.part&&e.part.top&&s[e.part.dayIndex]?e.part.top+s[e.part.dayIndex].top:n.top,d=n.left,c=n.width,h=document.createElement("div");h.style.position="absolute",h.style.width=c+"px",h.style.height=a+"px",h.style.left=d+"px",h.style.top=l+"px",h.style.overflow="hidden";var u=r();return h.appendChild(u),h.className=this.I("_shadow"),u.className=this.I("_shadow_inner"),i&&(h.style.borderRadius=i,u.style.borderRadius=i),o.divShadow.appendChild(h),h.calendar=o,h},this.ob=function(t){for(var e,i=o.rowlist,n={},s=0,r=0,a=i.length,l=0;l<a;l++){var d=i[l];if(r+=d.height,s=r-d.height,e=d,n.top=s,n.bottom=r,n.i=l,n.element=e,t<r)break}return n},this.ub=function(t){if(t>this.rowlist.length-1)throw new DayPilot.Exception("Row index too high");for(var e=0,i=0;i<=t;i++)e+=this.rowlist[i].height;var n=this.rowlist[t];return{top:e-n.height,height:n.height,bottom:e,i:t,data:n}},this.events.find=function(t){if(!o.events.list||"undefined"==typeof o.events.list.length)return null;if("function"==typeof t)return o.vb(t);for(var e=o.events.list.length,i=0;i<e;i++)if(o.events.list[i].id===t)return new DayPilot.Event(o.events.list[i],o);return null},this.events.findAll=function(t){if("function"==typeof t){for(var e=o.events.list.length,i=[],n=0;n<e;n++){var s=new DayPilot.Event(o.events.list[n],o);t(s)&&i.push(s)}return i}if("object"==typeof t)return o.events.findAll(function(e){for(var i in t)if(t[i]!==e.data[i])return!1;return!0});throw new DayPilot.Exception("function or object argument expected")},this.vb=function(t){for(var e=o.events.list.length,i=0;i<e;i++){var n=new DayPilot.Event(o.events.list[i],o);if(t(n))return n}return null},this.events.focus=function(t){var e=o.wb(t);null===e||void 0===e?void 0:e.focus()},this.events.scrollIntoView=function(t){if(o.wb(t)){var e=t.start(),i=o.getViewport();!DayPilot.Util.overlaps(i.start,i.end,t.start(),t.end())&&DayPilot.Util.overlaps(o.xb(),o.yb(),t.start(),t.end())&&o.scrollTo(e,"fast","middle");var n=t.resource();o.getViewport().resources.indexOf(n)===-1&&o.scrollToResource(n)}},this.events.all=function(){for(var t=[],e=0;e<o.events.list.length;e++){var i=new DayPilot.Event(o.events.list[e],o);t.push(i)}return t},this.events.forRange=function(t,e){t=t?new DayPilot.Date(t):o.visibleStart(),e=e?new DayPilot.Date(e):o.visibleEnd();for(var i=[],n=0;n<o.events.list.length;n++){var s=new DayPilot.Event(o.events.list[n],o);DayPilot.Util.overlaps(s.start(),s.end(),t,e)&&i.push(s)}return i},this.events.load=function(t,e,i){if(!t)throw new DayPilot.Exception("events.load(): 'url' parameter required");var n=function(t){var e={};e.exception=t.exception,e.request=t.request,"function"==typeof i&&i(e)},s=function(t){var i,s=t.request;try{i=JSON.parse(s.responseText)}catch(t){var r={};return r.exception=t,void n(r)}if(DayPilot.isArray(i)){var a={};if(a.preventDefault=function(){this.preventDefault.value=!0},a.data=i,"function"==typeof e&&e(a),a.preventDefault.value)return;o.events.list=a.data,o.l&&o.update()}};if(o.eventsLoadMethod&&"POST"===o.eventsLoadMethod.toUpperCase())DayPilot.ajax({"method":"POST","contentType":"application/json","data":{"start":o.visibleStart().toString(),"end":o.visibleEnd().toString()},"url":t,"success":s,"error":n});else{var r=t,a="start="+o.visibleStart().toString()+"&end="+o.visibleEnd().toString();r+=r.indexOf("?")>-1?"&"+a:"?"+a,DayPilot.ajax({"method":"GET","url":r,"success":s,"error":n})}},this.events.zb=function(t){var e=[];return o.rowlist.forEach(function(i){o.Ab(i.index);for(var n=0;n<i.events.length;n++){var s=i.events[n].data;if(o.Bb(s,t)){e.push(i),i.events.splice(n,1);break}}}),e},this.events.Cb=function(t){if(!t)return null;for(var e=o.rowlist,i=0;i<e.length;i++){var n=e[i];o.Ab(n.index);for(var s=0;s<n.events.length;s++){var r=n.events[s];if(o.Bb(r.data,t))return n.events[s]}}return null},this.events.Db=function(t){var e=[],i=o.Eb(),n=DayPilot.indexOf(o.events.list,t);o.Fb(n);var s=o.rowlist,r=!1;return s.forEach(function(s){if(!r){o.Ab(s.index);var a=o.Gb(t,s);a&&("function"==typeof o.onBeforeEventRender&&(a.cache=o.d.events[n]),e.push(s),i||(r=!0))}}),e},this.Bb=function(t,e){return DayPilot.Util.isSameEvent(t,e)},this.events.update=function(t){if("object"==typeof t&&!(t instanceof DayPilot.Event)){var e=o.events.find(t.id);return o.events.remove(e),void o.events.add(t)}if(o.events.list.find(function(e){return o.Bb(e,t.data)})){o.P.Hb&&(o.P.skip=!0);var i=o.events.zb(t.data);t.commit(),i=i.concat(o.events.Db(t.data)),o.events.Ib(i)}},this.events.remove=function(t){if(t){if("string"==typeof t||"number"==typeof t){var e=o.events.find(t);return void o.events.remove(e)}var i=o.Jb(t.data);i&&o.events.list.splice(i.index,1),o.P.Hb&&(o.P.skip=!0);var n=o.events.zb(t.data);o.events.Ib(n)}},this.events.add=function(t,e,i){i=i||{};var n=i.renderOnly;t instanceof DayPilot.Event||(t=new DayPilot.Event(t)),t.calendar=o,o.events.list||(o.events.list=[]);var s=o.Jb(t);if(n){if(!s)throw new DayPilot.Exception("Unexpected: event not found in list")}else{if(s)throw new DayPilot.Exception("The event you are trying to add using DayPilot.Scheduler.events.add() is already loaded. A unique ID is required.");s||o.events.list.push(t.data)}if(o.l){o.P.Hb&&(o.P.skip=!0);var r=o.events.Db(t.data);o.events.Ib(r)}},this.events.Kb=function(t){var e=t instanceof DayPilot.Event?t.data:t,i=new DayPilot.Date(e.start),n=new DayPilot.Date(e.end);return!!o.events.list.find(function(t){if(o.Bb(e,t))return!1;if(e.resource!==t.resource)return!1;var s=new DayPilot.Date(t.start),r=new DayPilot.Date(t.end);return DayPilot.Util.overlaps(i,n,s,r)})},this.events.Lb={"rows":[]},this.events.Mb=null,this.events.ta=function(){clearTimeout(o.events.Mb),o.events.Mb=null,o.events.Lb.rows=[]},this.events.Nb=0,this.events.Ib=function(t){var e=o.events.Lb.rows;t.forEach(function(t){e.push(t)}),o.events.Lb.rows=DayPilot.ua(e);var i=o.events.bb;o.events.Mb||(o.events.Mb=setTimeout(i,o.events.Nb))},this.events.bb=function(){clearTimeout(o.events.Mb),o.events.Mb=null;var t=o.events.Lb.rows;o.events.Lb.rows=[],o.Ob(t),o.Pb(),o.l&&(o.Ta&&o.xa(),o.S(),o.Sa(t))},this.P={},this.P.enabled=!1,this.P.skip=!1,this.P.skipUpdate=function(){return o.P.skip},this.P.skipped=function(){o.P.skip=!1},this.P.Qb=!1,this.P.Hb=!1,this.K={},this.K.reactDOM=null,this.K.react=null,this.Rb=function(t){var e=o.startDate;if(t.ticks===e.ticks)return t;var i=e;if(t.ticks<e.ticks){for(;i.ticks>t.ticks;)i=i.addTime(60*-o.ea()*1e3);return i}var n=this.da(t);if(n.current)return n.current.start;throw new DayPilot.Exception("getBoxStart(): time not found")},this.tb=function(t){var i=this.ob(o.coords.y);if("function"!=typeof t.end)throw new DayPilot.Exception("e.end function is not defined");if(!t.end())throw new DayPilot.Exception("e.end() returns null");var n=DayPilot.DateUtil.diff(t.rawend(),t.start());n=DayPilot.Util.atLeast(n,1);var s=l.Sb(n),r=0,a=o.coords.x;s&&(r=t.start().getTime()-this.Rb(t.start()).getTime());var d=0;if(e.Tb)if(s){var c=t.start(),h=this.Rb(c);d=e.Tb.getTime()-h.getTime();var u=60*o.ea()*1e3;d=Math.floor(d/u)*u}else d=e.Tb.getTime()-t.start().getTime();var v=this.getDate(a,!0).addTime(-d);e.Ub&&(v=t.start());var f=o.snapToGrid;f&&(v=this.Rb(v)),v=v.addTime(r);var p=v.addTime(n),b=v,m=p,g=this.getPixels(b),y=this.getPixels(m),w=f?g.boxLeft:g.left,x=f&&s?y.boxRight-w:y.left-w,C={};return C.top=i.top,C.left=w,C.row=i.element,C.rowIndex=i.i,C.width=x,C.start=v,C.end=p,C.relativeY=o.coords.y-i.top,C},this.ea=function(){switch(this.scale){case"CellDuration":return this.cellDuration;case"Minute":return 1;case"Hour":return 60;case"Day":return 1440;case"Week":return 10080}throw new DayPilot.Exception("can't guess cellDuration value")},this.Vb=function(t){return t.end.ticks-t.start.ticks},this.Wb=function(){var t=e.Xb.width,i=e.Xb.left,n=e.Yb,s=e.Ub.dpBorder,r=null,a=null,l=o.snapToGrid,d=!l;"left"===s?(r=o.getDate(i,d),a=n.rawend()):"right"===s&&(r=n.start(),a=o.getDate(i+t,d,!0)),e.Xb.start=r,e.Xb.end=a},this.Zb=function(){var t=o.coords,i=e.Ub.dpBorder,n=e.Ub.event,s=n.part.left;"right"===i&&(s+=n.part.width);var r,a,l=e.Ub.event.calendar.cellWidth,d=n.part.width,c=n.part.left,h=0,u=t.x-s,v=o.snapToGrid;if("right"===i){if(r=c,v){var f=o.aa(d+c+u).cell,p=o.aa(c).cell,b=p.left+p.width-c;a=f.left+f.width-c,a<b&&(a=b)}else a=d+u;var m=o.Q();c+a>m&&(a=m-c),e.Xb.left=c,e.Xb.width=a,e.Xb.style.left=c+"px",e.Xb.style.width=a+"px"}else{if("left"!==i)throw new DayPilot.Exception("Invalid dpBorder.");v?(u>=d&&(u=d),r=Math.floor((c+u+0)/l)*l,r<h&&(r=h)):r=c+u,a=d-(r-c);var g=c+d,y=l;v?"Never"===o.useEventBoxes&&(y=d<l?d:1):y=1,a<y&&(a=y,r=g-a),e.Xb.left=r,e.Xb.width=a,e.Xb.style.left=r+"px",e.Xb.style.width=a+"px"}o.Wb()},this.$b=function(){if(o.coords&&e._b){var t=e.ac,i=this.tb(e._b);t.row=i.row,t.style.height=DayPilot.Util.atLeast(i.row.height,0)+"px",t.style.top=i.top+"px",t.style.left=i.left+"px",t.style.width=i.width+"px",t.start=i.start,t.end=i.end}},this.bc=function(){return this.rowHeaderWidth},this.cc=function(){return this.dc(o.progressiveRowRenderingPreload)},this.dc=function(t){t=t||0;var e=0,i=o.rowlist.length;if(o.progressiveRowRendering){var n=o.r();e=n.yStart,i=n.yEnd+1,e=DayPilot.Util.atLeast(0,e-t),i=Math.min(o.rowlist.length,i+t)}return{"start":e,"end":i}},this.ya=function(){function t(){var t=o.divHeader;t&&(t.rows=[]);var e=t;e&&(e.innerHTML="")}this.ec=!0;var e=this.bc();t();var n=this.divHeader;if(n.style.width=e+"px",n.style.height=o.b+"px",o.divHeader=n,o.progressiveRowRendering)i();else for(var s=this.rowlist.length,r=0;r<s;r++)o.fc(r);o.gc(),this.divResScroll.appendChild(n)},this.hc=function(){if(o.progressiveRowRendering)for(var t=this.cc(),e=0;e<o.rowlist.length;e++)t.start<=e&&e<t.end?o.fc(e):o.ic(e)},this.gc=function(){if(!o.f.jc()){var t=o.divHeader,e=r();e.style.position="absolute",t.appendChild(e),o.nav.resScrollSpace=e;var i=r();i.style.position="relative",i.style.height="100%",i.className=this.I("_rowheader"),e.appendChild(i);var n=this.bc();e.style.width=n+"px",e.style.top=this.b+"px"}},this.ic=function(t){var e=o.divHeader.rows[t];e&&(DayPilot.de(e),o.divHeader.rows[t]=null)},this.Qa=function(t){this.ic(t),this.fc(t)},this.fc=function(t){var e=o.rowlist,i=o.divHeader;if(i&&!i.rows[t]){var n=this.bc(),s=e[t];if(s){var a=this.kc(s),l=r();l.style.position="absolute",l.style.top=s.top+"px",i.rows[t]=l,l.row=s,l.index=t;var d=a.row,c=this.rowHeaderWidth;l.style.width=c+"px",l.style.border="0px none";var h=d.toolTip||d.toolTip;h&&(l.title=h),"undefined"!=typeof d.ariaLabel?l.setAttribute("aria-label",d.ariaLabel):l.setAttribute("aria-label",d.text||""),l.onclick=o.lc;var u=r();u.style.width=c+"px",u.className=this.I("_rowheader"),d.cssClass&&DayPilot.Util.addClass(u,d.cssClass),d.cssClass&&DayPilot.Util.addClass(u,d.cssClass);var v=d.backColor||d.backColor;v&&(u.style.background=v);var f=d.fontColor||d.fontColor;f&&(u.style.color=f);var p=d.horizontalAlignment||d.horizontalAlignment;p&&(u.style.textAlign=p),u.style.height=s.height+"px",u.style.overflow="hidden",u.style.position="relative";var b=r();switch(b.className=this.I("_rowheader_inner"),
p){case"right":b.style.justifyContent="flex-end";break;case"left":b.style.justifyContent="flex-start";break;case"center":b.style.justifyContent="center"}u.appendChild(b);var m=d.areas||[],g=o.nc(s);DayPilot.Areas.attach(u,g,{areas:m});var y=r();y.style.position="absolute",y.style.bottom="0px",y.style.width="100%",y.style.height="0px",y.style.boxSizing="content-box",y.style.borderBottom="1px solid transparent",y.className=this.I("_resourcedivider"),u.appendChild(y);var w=r(),x=r();x.innerHTML=o.M(d.text,d.html),x.className=o.I("_rowheader_inner_text"),l.textDiv=x,l.cellDiv=u,w.appendChild(x),b.appendChild(w);var C=d.verticalAlignment||d.verticalAlignment;if(C)switch(b.style.display="flex",C){case"center":b.style.alignItems="center";break;case"top":b.style.alignItems="flex-start";break;case"bottom":b.style.alignItems="flex-end"}l.appendChild(u),i.appendChild(l),u.style.width=n+"px"}}},this.lc=function(t){var e=this.row,i=o.nc(e,this.index);o.jb(i,t)},this.oc=function(){if("Disabled"!==o.timeHeaderClickHandling){var t={};t.start=this.cell.start,t.level=this.cell.level,t.end=this.cell.end,t.end||(t.end=new DayPilot.Date(t.start).addMinutes(o.ea())),o.lb(t)}},this.pc=function(t){if("Disabled"!==o.timeHeaderRightClickHandling){t.cancelBubble=!0,t.preventDefault();var e={};e.start=this.cell.start,e.level=this.cell.level,e.end=this.cell.end,e.end||(e.end=new DayPilot.Date(e.start).addMinutes(o.ea()));var i={};i.header=e,i.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof o.onTimeHeaderRightClick&&(o.onTimeHeaderRightClick(i),i.preventDefault.value)||"function"==typeof o.onTimeHeaderRightClicked&&o.onTimeHeaderRightClicked(i)}},this.nc=function(t){return new DayPilot.Row(t,o)},this.Ab=function(t){var e=o.rowlist,i=e[t];i.events||i.resetEvents()},this.qc={},this.wa=function(t){if(t?this.events.list=t:this.events.list||(this.events.list=[]),null!=this.events.list&&!DayPilot.isArray(this.events.list))throw new DayPilot.Exception("DayPilot.Scheduler.events.list expects an array object");c.prepareRows(!0);var e,i=this.events.list,n="function"==typeof this.onBeforeEventRender;o.qc={};for(var s=0;s<i.length;s++){var r=i[s];if(r){if("object"!=typeof r)throw new DayPilot.Exception("Event data item must be an object");if(!r.start)throw new DayPilot.Exception("Event data item must specify 'start' property");if(r instanceof DayPilot.Event)throw new DayPilot.Exception("DayPilot.Scheduler: DayPilot.Event object detected in events.list array. Use raw event data instead.");if(!("string"==typeof r.id||"number"==typeof r.id))throw new DayPilot.Exception("All events must have an id property (string or number)");var a="_"+r.id;if(o.qc[a])throw new DayPilot.Exception("Duplicate event IDs are not allowed: "+a);o.qc[a]=!0,n&&this.Fb(s),e=o.rc(r.resource);for(var l=0;e&&l<e.length;l++){var d=e[l],h=this.Gb(r,d);h&&n&&(h.cache=this.d.events[s])}}}o.rowlist.forEach(function(t){o.sc(t)}),o.Pb()},c.rowcache={},c.prepareRows=function(t){c.rowcache={};for(var e=o.rowlist,i=0;i<e.length;i++){var n=e[i];if(t&&n.resetEvents(),o.Ab(n.index),n.id){var s=typeof n.id+"_"+n.id;c.rowcache[s]||(c.rowcache[s]=[]),c.rowcache[s].push(n)}}},this.rc=function(t){var e=typeof t+"_"+t;return c.rowcache[e]||[]},this.Eb=function(){for(var t={},e=0;e<o.rowlist.length;e++){var i=o.rowlist[e],n=i.id;if(t[n])return!0;t[n]=!0}return!1},this.Fb=function(t){var e=this.d.events,i=this.events.list[t],n={};i instanceof DayPilot.Event&&(i=i.data);for(var s in i)n[s]=i[s];if("string"==typeof n.start&&(n.start=new DayPilot.Date(n.start)),"string"==typeof n.end&&(n.end=new DayPilot.Date(n.end)),"function"==typeof this.onBeforeEventRender){var r={};r.e=n,r.data=n,this.onBeforeEventRender(r)}e[t]=n},this.sc=function(t){t.lines=[],t.sections=null,t.events.sort(this.tc);for(var e=0;e<t.events.length;e++){var i=t.events[e];t.putIntoLine(i)}},this.Ob=function(t){t=DayPilot.ua(t),t=o.Ra(t),t.forEach(function(t){o.sc(t)}),t.forEach(function(t){o.uc(t)})},this.Gb=function(t,e){var i=new DayPilot.Date(t.start),n=new DayPilot.Date(t.end);n=o.Ya(n);var s=i.ticks,r=n.ticks,a=o.startDate.ticks,d=o.startDate.addDays(o.days).ticks;if(r<s)return null;var c=null;if("function"==typeof o.onBeforeEventRender){var h=DayPilot.indexOf(o.events.list,t);c=o.d.events[h]}if(e.id!==t.resource||(r<=a||s>=d)&&(s!==r||s!==a))return null;var u=new DayPilot.Event(t,o);u.part.dayIndex=o.rowlist.indexOf(e),u.part.start=a<s?i:o.startDate,u.part.end=d>r?n:o.startDate.addDays(o.days);var v=this.getPixels(u.part.start),f=this.getPixels(u.part.end);u.part.start===u.part.end&&(f=this.getPixels(u.part.end.addMilliseconds(1)));var p=v.left,b=f.left;if(l.Sb(r-s)){var m=v.boxLeft,g=f.boxRight;u.part.left=m,u.part.width=g-m,u.part.barLeft=Math.max(p-u.part.left,0),u.part.barWidth=Math.max(b-p,1)}else u.part.left=p,u.part.width=Math.max(b-p,1),u.part.barLeft=0,u.part.barWidth=Math.max(b-p,1);var y=o.eventMinWidth;return u.part.width=Math.max(u.part.width,y),u.part.right=u.part.left+u.part.width,u.cache=c,e.events.push(u),u},this.tc=function(t,e){if(!(t&&e&&t.start&&e.start))return 0;var i=t.start().ticks-e.start().ticks;return 0!==i?i:e.end().ticks-t.end().ticks},this.rows={},this.rows.all=function(){for(var t=[],e=0;e<o.rowlist.length;e++){var i=o.nc(o.rowlist[e]);t.push(i)}return t},this.rows.each=function(t){o.rows.all().forEach(t)},this.rows.forEach=function(t){o.rows.all().forEach(t)},this.rows.find=function(t,e){if("string"==typeof t||"number"==typeof t||!t&&e){var i=o.rc(t);t||(i=o.rowlist);var n=null;return"string"==typeof e||e instanceof DayPilot.Date?(e=new DayPilot.Date(e),n=i.find(function(t){return e===t.start})):n=i[0],n?new DayPilot.Row(n,o):null}if("function"!=typeof t)throw new DayPilot.Exception("Invalid rows.find() argument: id or function expected");var s=e||0,r=o.rowlist.find(function(e,i){return!(i<s)&&t(o.nc(e))});if(r)return o.nc(r)},this.rows.load=function(t,e,i){if(!t)throw new DayPilot.Exception("rows.load(): 'url' parameter required");var n=function(t){var e={};e.exception=t.exception,e.request=t.request,"function"==typeof i&&i(e)},s=function(t){var i,s=t.request;try{i=JSON.parse(s.responseText)}catch(t){var r={};return r.exception=t,void n(r)}if(DayPilot.isArray(i)){var a={};if(a.preventDefault=function(){this.preventDefault.value=!0},a.data=i,"function"==typeof e&&e(a),a.preventDefault.value)return;o.resources=a.data,o.l&&o.update()}};o.rowsLoadMethod&&"POST"===o.rowsLoadMethod.toUpperCase()?DayPilot.ajax({"method":"POST","url":t,"success":s,"error":n}):DayPilot.ajax({"method":"GET","url":t,"success":s,"error":n})},this.rows.remove=function(t){if("number"==typeof t||"string"==typeof t){var e=o.rows.find(t);if(!e)throw new DayPilot.Exception("The row to be removed was not found");return void o.rows.remove(e)}var i=t.$.row.resource,n=DayPilot.indexOf(o.resources,i);o.resources.splice(n,1),o.update()},this.rows.add=function(t){o.resources.push(t),o.qa()},this.rows.update=function(t){if(!(t instanceof DayPilot.Row||"object"==typeof t))throw new DayPilot.Exception("DayPilot.Scheduler.rows.update() expects a DayPilot.Row object or a data object.");if(!(t instanceof DayPilot.Row)){var e=t;if(t=o.rows.find(e.id),!t)return;t.data=e}var i=t.index,n=o.rowlist,s=n[i],r=t.data,a=o.vc(r),l=o.wc(a);l.level=s.level,l.index=i,l.top=s.top,l.height=s.height,n[i]=l,l.resetEvents(),o.Ab(l.index),o.xc(l),o.sc(l),o.Qa(l.index),o.Fa(),o.Ia()},this.xc=function(t){for(var e=o.events.list,i=e.length,n="function"==typeof o.onBeforeEventRender,s=0;s<i;s++){var r=e[s];if(r){if(r instanceof DayPilot.Event)throw new DayPilot.Exception("DayPilot.Scheduler: DayPilot.Event object detected in events.list array. Use raw event data instead.");if(r.resource===t.id){n&&this.Fb(s);var a=this.Gb(r,t);a&&n&&(a.cache=this.d.events[s])}}}},this.sa=function(){var t=this.resources;if({}.i=0,null!=t&&!DayPilot.isArray(t))throw new DayPilot.Exception("DayPilot.Scheduler.resources expects an array object");t=t||[],o.rowlist=[],this.yc(t)},this.xb=function(){return new DayPilot.Date(this.startDate)},this.yb=function(){return new DayPilot.Date(o.startDate).addDays(o.days)},this.visibleStart=function(){return this.xb()},this.visibleEnd=function(){return this.yb()},this.wc=function(t){var e={};return e.backColor=t.backColor,e.fontColor=t.fontColor,e.cssClass=t.cssClass,e.name=t.name,e.html=o.M(t.name,t.html),e.id=t.id,e.toolTip=t.toolTip,e.areas=t.areas,e.tags=t.tags,e.height=o.eventHeight,e.level=0,e.resource=t.N,e.lines=[],e.isRow=!0,e.getHeight=function(){return Math.max(o.eventHeight,this.lines.length*o.eventHeight)},e.resetEvents=function(){var t=e;t.events=[],t.events.forRange=function(e,i){e=new DayPilot.Date(e),i=i?new DayPilot.Date(i):o.startDate.addDays(o.days);for(var n=[],s=0;s<t.events.length;s++){var r=t.events[s],a=o.Ya(r.end());DayPilot.Util.overlaps(r.start(),a,e,i)&&n.push(r)}return n}},e.zc=function(){var t=[];return t.add=function(t){this.push(t)},t.isFree=function(t,e,i){for(var n=t+e-1,s=this.length,r=0;r<s;r++){var a=this[r];if(!(n<a.part.left||t>a.part.left+a.part.width-1)){if(DayPilot.contains(i,a.data))continue;return!1}}return!0},t},e.findFreeLine=function(t,i){for(var n=0;n<this.lines.length;n++){if(this.lines[n].isFree(t,i))return n}var s=e.zc();return this.lines.push(s),this.lines.length-1},e.putIntoLine=function(t){var i=e.findFreeLine(t.part.left,t.part.width);return this.lines[i].add(t),i},e},this.yc=function(t){if(t)for(var e=o.rowlist,i=0;i<t.length;i++)if(t[i]){var n={};n.index=i;var s=this.vc(t[i],n),r=o.wc(s,parent);r.index=i,e.push(r)}},this.kc=function(t){var e={};return e.row=this.nc(t),DayPilot.Util.copyProps(t,e.row,["html","backColor","fontColor","cssClass","toolTip","areas"]),"function"==typeof this.onBeforeRowHeaderRender&&this.onBeforeRowHeaderRender(e),e},this.vc=function(t,e){var i={get $data(){return this.N}};for(var n in e)i[n]=e[n];for(var s in t)i[s]=t[s];return i.html=o.M(t.name,t.html),i.N=t,i},this.Ac=function(){this.nav.top.dp=this,this.nav.top.innerHTML="",DayPilot.Util.addClass(this.nav.top,this.I("_main")),this.nav.top.setAttribute("role","region"),this.nav.top.setAttribute("aria-label","scheduler"),this.nav.top.style.userSelect="none",this.nav.top.style.webkitUserSelect="none",this.nav.top.style.WebkitTapHighlightColor="rgba(0,0,0,0)",this.nav.top.style.WebkitTouchCallout="none",this.width&&(this.nav.top.style.width=this.width),this.nav.top.style.lineHeight="1.2",this.nav.top.style.position="relative",this.visible||(this.nav.top.style.display="none"),this.nav.top.ontouchstart=d.Bc,this.nav.top.ontouchmove=d.Cc,this.nav.top.ontouchend=d.Dc;var t=this.rowHeaderWidth,e=r();e.style.position="absolute",e.style.left="0px",e.style.width=t+"px";var i=r();i.style.height="0px",i.style.boxSizing="content-box",i.style.borderTop="1px solid transparent",i.className=this.I("_divider_horizontal"),this.nav.dh1=i,this.nav.left=e,e.appendChild(this.Ec()),e.appendChild(i),e.appendChild(this.Fc());var n=r();n.style.position="absolute",n.style.left=t+"px",n.style.width="1px",n.style.height=this.U()+this.T()+"px",n.className=this.I("_splitter"),this.nav.divider=n;var s=r();s.style.marginLeft=t+1+"px",s.style.position="relative",this.nav.right=s;var a=r();a.style.position="absolute",a.style.top=this.U()+"px",a.style.width="100%",a.style.height="1px",a.style.boxSizing="border-box",a.style.borderBottom="1px solid transparent",a.setAttribute("data-dh2","true"),a.className=this.I("_divider_horizontal"),this.nav.dh2=a,s.appendChild(o.Gc()),s.appendChild(o.Hc()),s.appendChild(a);var l=r();l.style.clear="left";var c=r();c.style.height="1px",c.style.position="absolute",c.style.left="0px",c.style.right="0px",c.style.display="none",c.className=this.I("_divider_horizontal"),this.nav.dividerTop=c;var h=r();h.style.height="1px",h.style.position="absolute",h.style.left="0px",h.style.right="0px",h.style.display="none",h.className=this.I("_divider_horizontal")+" "+this.I("_divider_horizontal_frozen_bottom"),this.nav.dividerBottom=h,this.nav.top.appendChild(e),this.nav.top.appendChild(n),this.nav.top.appendChild(s),this.nav.top.appendChild(l),this.nav.top.appendChild(c),this.nav.top.appendChild(h)},this.Da=function(){var t=this.U();this.nav.corner&&(this.nav.corner.style.height=t+"px"),this.divTimeScroll&&(this.divTimeScroll.style.height=t+"px"),this.divNorth&&(this.divNorth.style.height=t+"px"),this.nav.dh1&&this.nav.dh2&&(this.nav.dh1.style.top=t+"px",this.nav.dh2.style.top=t+"px"),this.nav.scroll.style.top=t+1+"px"},this.Ic=function(){var t=this.rowHeaderWidth;this.nav.corner&&(this.nav.corner.style.width=t+"px"),this.divResScroll.style.width=t+"px",this.nav.left.style.width=t+"px",this.nav.divider.style.left=t-1+"px",this.nav.right.style.marginLeft=t+"px"},this.Jc=function(){var t=this.rowHeaderWidth,e=this.divHeader;e.style.width=t+"px";for(var i=o.cc(),n=i.start;n<i.end;n++){var s=e.rows[n];if(s){var r=o.rowHeaderWidth;s.style.width=r+"px";s.firstChild.style.width=r+"px"}}o.nav.resScrollSpace&&(o.nav.resScrollSpace.style.width=t+"px")},this.Ca=function(){this.Ic(),this.Jc()},this.Ec=function(){var t=this.rowHeaderWidth,e=r();o.nav.corner=e,e.style.width=t+"px",e.style.height=this.U()+"px",e.style.overflow="hidden",e.style.position="relative",e.oncontextmenu=function(){return!1},e.className=this.I("_corner");var i=r();return i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.right="0px",i.style.bottom="0px",i.className=this.I("_corner_inner"),i.innerHTML="&nbsp;",this.divCorner=i,e.appendChild(i),e},this.U=function(){return o.timeHeaders?o.timeHeaders.length*o.headerHeight:0},this.Kc=null,this.Fc=function(){var t=r();t.style.width=this.rowHeaderWidth+"px",t.style.height=this.T()+"px",t.style.overflow="hidden",t.style.position="relative",t.className=o.I("_rowheader_scroll");var i=o.f.jc();i&&(t.style.overflowY="auto"),t.ontouchstart=function(){e.Lc=!0},t.oncontextmenu=function(){return!1},t.onscroll=function(){if(o.Kc&&clearTimeout(o.Kc),i){var n=function(){var e=o.Mc()-o.nav.scroll.offsetHeight;t.scrollTop=Math.min(t.scrollTop,e),o.nav.scroll.scrollTop=t.scrollTop};DayPilot.browser.ios?e.Lc&&(o.Kc=setTimeout(n,10)):o.Kc=setTimeout(n,10)}else o.Kc=setTimeout(function(){o.nav.scroll.scrollTop=t.scrollTop},500)},t.setAttribute("role","region"),t.setAttribute("aria-label","scheduler rows");var n=r();return this.divHeader=n,t.appendChild(n),this.divResScroll=t,this.V=t,t},this.Nc=null,this.Oc=null,this.Pc=function(){var t=function(){o.Qc(),o.Ka()},e=function(){var e=o.nav.top;if(e){if(!o.Nc)return o.Nc={},void(o.Nc.width=e.offsetWidth);o.Nc.width!==e.offsetWidth&&(o.Nc.width=e.offsetWidth,t())}};if(!o.Oc){var i=new ResizeObserver(DayPilot.debounce(e,100));i.observe(o.nav.top),o.Oc=i}},this.Qc=function(){o.a||(o.S(),o.Rc(),o.d.drawArea=null)},this.Rc=function(){var t=o.gb;o.clearSelection(),o.gb=t,o.hb(t,{"justDraw":!0})},this.Gc=function(){var t=r();t.style.overflow="hidden",t.style.display="block",t.style.position="absolute",t.style.top="0px",t.style.width="100%",t.style.height=this.U()+"px",t.style.overflow="hidden",t.className=o.I("_timeheader_scroll"),this.divTimeScroll=t;var e=r();return e.style.width=this.Q()+5e3+"px",this.divNorth=e,t.appendChild(e),t},this.T=function(){var t=0,e=o.heightSpec;return"Fixed"===e?this.height?this.height:0:(t=o.Mc(),"Max"===e&&t>o.height?o.height:t)},this.Mc=function(){var t;return this.b!==-1?(t=this.b,this.b>0&&"auto"===o.nav.scroll.style.overflowX&&(t+=DayPilot.sh(o.nav.scroll)+1)):t=this.rowlist.length*o.eventHeight,t},this.Hc=function(){var t=r();t.style.overflow="auto",t.style.overflowX="auto",t.style.overflowY="auto",t.style.height=this.T()+"px",t.style.top=this.U()+1+"px",t.style.position="absolute",t.style.width="100%",t.className=this.I("_scrollable"),t.oncontextmenu=function(){return!1},this.nav.scroll=t,this.n=r();var e=this.n;e.style.userSelect="none",e.style.webkitUserSelect="none",e.calendar=this,e.style.position="absolute";var i=this.Q();return i>0&&(e.style.width=i+"px"),e.onmousedown=this.Sc,e.onmousemove=this.Tc,e.onmouseup=this.Uc,e.oncontextmenu=this.Vc,e.className=this.I("_matrix"),this.divStretch=r(),this.divStretch.style.position="absolute",this.divStretch.style.height="1px",e.appendChild(this.divStretch),this.divCells=r(),this.divCells.style.position="absolute",this.divCells.oncontextmenu=this.Vc,e.appendChild(this.divCells),this.divLines=r(),this.divLines.style.position="absolute",this.divLines.oncontextmenu=this.Vc,e.appendChild(this.divLines),this.divSeparators=r(),this.divSeparators.style.position="absolute",this.divSeparators.oncontextmenu=this.Vc,e.appendChild(this.divSeparators),this.divRange=r(),this.divRange.style.position="absolute",this.divRange.oncontextmenu=this.Vc,e.appendChild(this.divRange),this.divEvents=r(),this.divEvents.style.position="absolute",e.appendChild(this.divEvents),this.divShadow=r(),this.divShadow.style.position="absolute",e.appendChild(this.divShadow),t.appendChild(e),t},this.Wc=function(){e.Xc||(e.Xc=!0,DayPilot.re(document,"mouseup",e.Yc),DayPilot.reNonPassive(document,"touchmove",e.Zc),DayPilot.re(document,"touchend",e.$c))},this._c=function(){this.nav.scroll.root=this,this.nav.scroll.onscroll=this.Ka,o.ad=this.nav.scroll.scrollLeft,o.bd=this.nav.scroll.scrollTop,this.divNorth&&(o.cd=this.divNorth.clientWidth)},this.dd={},this.dd.step=300,this.dd.delay=10,this.dd.mode="display",this.dd.layers=!1,this.uc=function(t){for(var e=0,i=0;i<t.lines.length;i++){for(var n=t.lines[i],s=0;s<n.length;s++){var r=n[s];r.part.line=i,r.part.top=e+o.rowMarginTop,r.part.right=r.part.left+r.part.width}e+=o.eventHeight}},this.ra=null,this.Ja=function(t){if(!o.a){var e=this.dd.step;"display"===this.dd.mode?this.divEvents.style.display="none":"visibility"===this.dd.mode&&(this.divEvents.style.visibility="hidden"),this.divEvents.setAttribute("role","region"),this.divEvents.setAttribute("aria-label","scheduler events");var i="Progressive"===this.dynamicEventRendering,n=this.r(),s=n.pixels.top,r=n.pixels.bottom;o.rowlist.filter(function(t){var e=t.top-l.ed(),n=e+t.height+2*l.ed();return!i||!(n<=s||e>=r)}).forEach(function(i){o.uc(i);for(var n=0;n<i.lines.length;n++)for(var s=i.lines[n],r=0;r<s.length;r++){var a=s[r],l=o.fd(a);if(t&&l&&(e--,e<=0))return o.divEvents.style.visibility="",o.divEvents.style.display="",void(o.ra=setTimeout(function(){o.Ja(t)},o.dd.delay))}}),this.divEvents.style.display="",this.A()}},this.Va=function(t){var e=o.rowlist[t];this.uc(e);for(var i=0;i<e.lines.length;i++)for(var n=e.lines[i],s=0;s<n.length;s++){var r=n[s];this.fd(r)}},this.Ea=function(){if(this.elements.events)for(var t=this.elements.events.length,e=0;e<t;e++){var i=this.elements.events[e];this.gd(i)}this.elements.events=[]},this.Ua=function(t){if(this.elements.events){for(var e=this.elements.events.length,i=[],n=0;n<e;n++){var s=this.elements.events[n];s.event.part.dayIndex===t&&(this.gd(s),i.push(n))}for(var n=i.length-1;n>=0;n--)this.elements.events.splice(i[n],1)}},this.gd=function(t){var e=t.domArgs;if(t.domArgs=null,e&&"function"==typeof o.onBeforeEventDomRemove&&o.onBeforeEventDomRemove(e),e&&"function"==typeof o.onBeforeEventDomAdd){var i=e&&e.hd;if(i){var n=o.K.reactDOM&&DayPilot.Util.isReactComponent(e.element),s=o.kd.jd&&DayPilot.Util.isVueVNode(e.element);n?o.K.O(i):s&&(o.kd.ld=!0,o.kd.md(i),o.kd.ld=!1)}}t.remove(),t.onclick=null,t.oncontextmenu=null,t.onmouseover=null,t.onmouseout=null,t.onmousemove=null,t.onmousedown=null,t.ondblclick=null,t.event&&(t.event.rendered=null,t.event=null)},this.nd=function(){if("Progressive"===this.dynamicEventRendering){if(o.dynamicEventRenderingCacheSweeping){var t=o.dynamicEventRenderingCacheSize||0;this.divEvents.style.display="none";for(var e=[],i=this.elements.events.length,n=i-1;n>=0;n--){var s=this.elements.events[n];this.od(s.event)?t>0?(t--,e.unshift(s)):this.gd(s):e.unshift(s)}this.elements.events=e,this.divEvents.style.display=""}}},this.pd=function(t){for(var e=this.r(),i=this.elements.cells.length,n=i-1;n>=0;n--){var s=this.elements.cells[n];e.xStart<s.coords.x&&s.coords.x<=e.xEnd&&e.yStart<s.coords.y&&s.coords.y<=e.yEnd||(t>0?t--:this.qd(s))}},this.qd=function(t){if(t&&t.coords){var e=t.coords.x,i=t.coords.y;!function(){var e=t.domArgs;if(t.domArgs=null,e&&"function"==typeof o.onBeforeCellDomRemove&&o.onBeforeCellDomRemove(e),e&&"function"==typeof o.onBeforeCellDomAdd){var i=e&&e.hd;if(i){var n=o.K.reactDOM&&DayPilot.Util.isReactComponent(e.element),s=o.kd.jd&&DayPilot.Util.isVueVNode(e.element);n?o.K.O(i):s&&(o.kd.ld=!0,o.kd.md(i),o.kd.ld=!1)}}}(),DayPilot.rfa(o.elements.cells,t),DayPilot.de(t),o.d.cells[e+"_"+i]=null}},this.rd=function(){var t="Progressive"===this.dynamicEventRendering;if(!this.nav.scroll)return!1;for(var e=this.nav.scroll.scrollTop-l.ed(),i=e+this.nav.scroll.clientHeight+2*l.ed(),n=0;n<this.rowlist.length;n++){var s=this.rowlist[n],r=s.top,a=s.top+s.height;if(!t||!(r>=i||a<=e))for(var o=0;o<s.lines.length;o++)for(var d=s.lines[o],c=0;c<d.length;c++){var h=d[c];if(this.sd(h))return!0}}return!1},this.sd=function(t){if(t.rendered)return!1;var e="Progressive"===this.dynamicEventRendering,i=this.nav.scroll.scrollLeft-l.td(),n=i+this.nav.scroll.clientWidth+2*l.td(),s=t.part.left,r=t.part.left+t.part.width;return!e||!(n<=s||i>=r)},this.od=function(t){if(!t.rendered)return!0;var e=this.r(),i=e.pixels.top,n=e.pixels.bottom,s=e.pixels.left-this.dynamicEventRenderingMargin,r=e.pixels.right+this.dynamicEventRenderingMargin,a=t.part.left,l=t.part.right,d=t.part.top,c=t.part.top+o.eventHeight;return r<=a||s>=l||(n<=d||i>=c)},this.fd=function(t,e){e=e||{};var i=e.forced;if(t.rendered)return!1;var n="Progressive"===this.dynamicEventRendering,s=t.part.dayIndex,a=o.divEvents,c=o.rowlist,h=c[s],u=h.top,v=this.r(),f=v.pixels.left-l.td(),p=v.pixels.right+l.td(),b=v.pixels.top,m=v.pixels.bottom,g=t.part.left,y=t.part.left+t.part.width,w=t.part.top+u,x=w+o.eventHeight,C=p<=g||f>=y,D=m<=w||b>=x;if(!i&&n&&(C||D))return!1;var T=t.part.width,E=o.eventHeight,R=t.cache||t.data,k=R.borderRadius||o.eventBorderRadius;"number"==typeof k&&(k+="px");var H=R.padding||o.eventPadding;"number"==typeof H&&(H+="px"),T=DayPilot.Util.atLeast(0,T),E=DayPilot.Util.atLeast(0,E);var S=r();S.style.position="absolute",S.style.left=t.part.left+"px",S.style.top=u+t.part.top+"px",S.style.width=T+"px",S.style.height=E+"px",o.eventTextWrappingEnabled||(S.style.whiteSpace="nowrap"),S.style.overflow="hidden",S.className=this.I("_event"),R.cssClass&&DayPilot.Util.addClass(S,R.cssClass);"number"==typeof t.part.line&&DayPilot.Util.addClass(S,this.I("_event_line"+t.part.line)),k&&(S.style.borderRadius=k),this.showToolTip&&(S.title=t.client.toolTip()||""),S.onmousemove=this.ud,S.onmousedown=this.vd,S.onmouseup=this.wd,S.ontouchstart=d.xd,S.ontouchmove=d.yd,S.ontouchend=d.zd,t.client.clickEnabled()&&(S.onclick=this.fa),"undefined"!=typeof R.ariaLabel?S.setAttribute("aria-label",R.ariaLabel):S.setAttribute("aria-label",R.text),S.setAttribute("tabindex","-1");var M=r();M.className=o.I("_event_inner"),k&&(M.style.borderRadius=k),H&&(M.style.padding=H),R.backColor&&(M.style.background=R.backColor),R.fontColor&&(M.style.color=R.fontColor),"darker"===R.borderColor&&R.backColor?M.style.borderColor=DayPilot.ColorUtil.darker(R.backColor,2):M.style.borderColor=R.borderColor,R.backImage&&(M.style.backgroundImage="url("+R.backImage+")",R.backRepeat&&(M.style.backgroundRepeat=R.backRepeat)),S.appendChild(M);var _=t.start().getTime()===t.part.start.getTime(),U=t.rawend().getTime()===t.part.end.getTime();if(_||DayPilot.Util.addClass(S,this.I("_event_continueleft")),U||DayPilot.Util.addClass(S,this.I("_event_continueright")),t.client.barVisible()&&T>0){var I=100*t.part.barLeft/T,P=Math.ceil(100*t.part.barWidth/T),N=r();N.className=this.I("_event_bar"),N.style.position="absolute",R.barBackColor&&(N.style.backgroundColor=R.barBackColor);var L=r();L.className=this.I("_event_bar_inner"),L.style.left=I+"%",0<P&&P<=1?L.style.width="1px":L.style.width=P+"%",R.barColor&&(L.style.backgroundColor=R.barColor),R.barImageUrl&&(L.style.backgroundImage="url("+R.barImageUrl+")"),N.appendChild(L),S.appendChild(N)}S.row=s,S.event=t,function(){if("function"!=typeof o.onBeforeEventDomAdd&&"function"!=typeof o.onBeforeEventDomRemove)return void o.Ad(M,R.text,R.html);var e={};if(e.control=o,e.e=t,e.element=null,S.domArgs=e,"function"==typeof o.onBeforeEventDomAdd&&o.onBeforeEventDomAdd(e),e.element){var i=M;if(i){e.hd=i;var n=DayPilot.Util.isReactComponent(e.element),s=DayPilot.Util.isVueVNode(e.element);if(n){if(!o.K.reactDOM)throw new DayPilot.Exception("Can't reach ReactDOM");o.K.L(e.element,i)}else if(s){if(!o.kd.jd)throw new DayPilot.Exception("Can't reach Vue");o.kd.ld=!0,o.kd.Bd(e.element,i),o.kd.ld=!1}else i.appendChild(e.element)}}else M.innerHTML=t.client.innerHTML()}();var A=[];return function(){if("Disabled"!==o.eventDeleteHandling&&!R.deleteDisabled){var t=o.durationBarVisible?o.durationBarHeight:0;A.push({v:"Hover",w:17,h:17,top:t+2,right:2,css:o.I("_event_delete"),onClick:function(t){o.ma(t.source)}})}}(),R.areas&&(A=A.concat(R.areas)),DayPilot.Areas.attach(S,t,{areas:A}),this.elements.events.push(S),a.appendChild(S),t.rendered=!0,!0},this.M=function(t,e){return o.f.Cd()?DayPilot.Util.escapeTextHtml(t,e):DayPilot.Util.isNullOrUndefined(e)?DayPilot.Util.isNullOrUndefined(t)?"":t:e},this.Ad=function(t,e,i){DayPilot.Util.isNullOrUndefined(i)?null!==e&&void 0!==e&&(o.f.Cd()?t.innerText=e:t.innerHTML=e):t.innerHTML=i},this.Wa=function(){for(var t=0;t<this.elements.events.length;t++){var e=this.elements.events[t],i=e.event,n=i.part.dayIndex,s=o.rowlist[n],r=s.top,a=r+i.part.top,l=s.height,d=o.eventHeight;i.part.top+d>l&&(d=Math.max(0,l-i.part.top)),e.style.top=a+"px",e.style.height=d+"px"}},this.Dd=function(t){if(!t)return null;for(var e=0;e<o.elements.events.length;e++){var i=o.elements.events[e];if(i.event===t||i.event.data===t.data)return i}return null},this.wb=function(t){var e=o.events.Cb(t.data);if(!e)return null;var i=o.rowlist[e.part.dayIndex];return o.uc(i),o.fd(e,{"forced":!0}),o.Dd(e)},this.ud=function(t){for(var e=t.currentTarget;e&&!e.event;)e=e.parentNode;o.Ed(e,t),o.la(t)},this.ha={},this.vd=function(t){o.la(t);var i=DayPilot.Util.mouseButton(t);t.preventDefault(),t.stopPropagation(),i.left&&("w-resize"===this.style.cursor||"e-resize"===this.style.cursor?(e.ga=!0,e.Ub=this,e.Yb=this.event,e.Fd=DayPilot.mc(t),s().style.cursor=this.style.cursor):("move"===this.style.cursor||this.event.client.moveEnabled())&&o.Gd(this,t))},this.wd=function(t){DayPilot.Util.mouseButton(t).right&&o.ka.call(this,t)},this.Gd=function(t,e){var i=o.ha;o.la(e),i.Hd=!0,i.ha=t,i._b=t.event,i.Fd=DayPilot.mc(e),i.Id=DayPilot.mo3(t,e).x,i.Tb=o.getDate(o.coords.x,!0)},"undefined"==typeof DayPilot.Global.touch&&(DayPilot.Global.touch={}),DayPilot.Global.touch.active=!1;DayPilot.Global.touch.start=!1;d.qb=[],d.relativeCoords=function(t){return d.Jd(t)},d.startResizing=function(t,e){d.Kd(t,e)},d.startMoving=function(t,e){d.Gd(t,e)},d.xd=function(e){if(!DayPilot.Global.touch.active&&!DayPilot.Global.touch.start){e.stopPropagation(),d.Ld(),DayPilot.Global.touch.start=!0,DayPilot.Global.touch.active=!1;var i=e.currentTarget;o.coords=d.Jd(e);var n=o.tapAndHoldTimeout;d.qb.push(setTimeout(function(){DayPilot.Global.touch.active=!0,DayPilot.Global.touch.start=!1,e.preventDefault();var n=i.event;switch(o.eventTapAndHoldHandling){case"Move":if(n.client.moveEnabled()){var s=t(e);d.Gd(i,s)}}},n))}},d.yd=function(){d.Ld(),DayPilot.Global.touch.start=!1},d.zd=function(t){if(!DayPilot.Util.isMouseEvent(t)){if(d.Ld(),DayPilot.Global.touch.start){DayPilot.Global.touch.start=!1,t.preventDefault(),t.stopPropagation();var e=t.currentTarget;setTimeout(function(){o.ja(e,t)})}setTimeout(function(){DayPilot.Global.touch.start=!1,DayPilot.Global.touch.active=!1},500)}},d.Bc=function(t){if(!(DayPilot.Global.touch.active||DayPilot.Global.touch.start||t.touches.length>1||"Disabled"===o.timeRangeSelectedHandling)){d.Ld(),DayPilot.Global.touch.start=!0,DayPilot.Global.touch.active=!1;var e=o.tapAndHoldTimeout;d.qb.push(setTimeout(function(){DayPilot.Global.touch.active=!0,DayPilot.Global.touch.start=!1,t.preventDefault(),o.coords=d.Jd(t),d.Md=o.Nd()},e));o.coords=d.Jd(t)}},d.Cc=function(t){if(d.Ld(),DayPilot.Global.touch.start=!1,e.Ub)return t.preventDefault(),void d.Od();if(DayPilot.Global.touch.active){if(t.preventDefault(),o.coords=d.Jd(t),e.ha)return void d.Pd();if(d.Md){var i=d.Md;i.end={x:Math.floor(o.coords.x/o.cellWidth),"time":o.getDate(o.coords.x,!0)},o.hb(i)}}},d.debug=function(){},d.Dc=function(t){d.Ld();if(DayPilot.Global.touch.active){if(e.ha){t.preventDefault();var i=e._b;if(o!==e.ac.calendar)return;var n=e.ac.start,r=e.ac.end,a=e.ac.row.id;DayPilot.Util.removeClass(e.ha,o.I("_event_moving_source")),DayPilot.de(e.ac),e.ac.calendar=null,s().style.cursor="",e.ha=null,e._b=null,e.ac=null,o.$a(i,n,r,a)}if(d.Md){var l=d.Md;d.Md=null;var c=o.elements.range2;c&&c.overlapping?o.clearSelection():o.cb(l)}}else if(DayPilot.Global.touch.start){if(o.coords.x<o.getScrollX())return;var l=o.Nd();o.hb(l);var c=o.elements.range2;c&&c.overlapping?o.clearSelection():o.cb(l)}setTimeout(function(){DayPilot.Global.touch.start=!1,DayPilot.Global.touch.active=!1},500)},d.Ld=function(){for(var t=0;t<d.qb.length;t++)clearTimeout(d.qb[t]);d.qb=[]},d.Jd=function(t){function e(t,e,i){var n=DayPilot.abs(i);return{x:t-n.x,y:e-n.y,toString:function(){return"x: "+this.x+", y:"+this.y}}}var i=o.n,n=t.touches?t.touches[0]:t;return e(n.pageX,n.pageY,i)},d.Gd=function(t,i){e.ha=t,e._b=t.event,e.Fd=i;var n=DayPilot.abs(t);e.Id=i.x-n.x,e.Tb=o.getDate(o.coords.x,!0),e.ac=o.sb(t),o.$b()},d.Kd=function(t,i){e.Ub=t,e.Yb=t.event,e.Ub.dpBorder=i,e.Xb||(e.Xb=o.sb(t)),o.Zb()},d.Od=function(){if(!e.Xb){var t=e.Ub;e.Xb=o.sb(t)}o.Zb()},d.Pd=function(){if(!e.ac){var t=e.ha;e.ac=o.sb(t)}e.ac.calendar.$b()},this.Ed=function(t,i){var n=this.eventResizeMargin,s=t;if("undefined"!=typeof e){var r=DayPilot.mo3(t,i);if(r&&(o.eventOffset=r,!e.Ub&&!e.ha)){var a=s.event.part.start.toString()===s.event.start().toString(),l=s.event.part.end.toString()===s.event.rawend().toString();r.x<=n&&s.event.client.resizeEnabled()?a?(t.style.cursor="w-resize",t.dpBorder="left"):t.style.cursor="not-allowed":t.offsetWidth-r.x<=n&&s.event.client.resizeEnabled()?l?(t.style.cursor="e-resize",t.dpBorder="right"):t.style.cursor="not-allowed":e.Ub||e.ha||(s.event.client.clickEnabled()?t.style.cursor="pointer":t.style.cursor="default")}}},this.ib=function(){var t=o.ea();return o.days*(1440/t)},this.eb=function(t){if(t=t||e.Md||o.gb,!t)return null;var i=o.rowlist[t.start.y];if(!i)return null;var n,s,r=t,a=r.end.time>r.start.time,l=i.id,d=a?r.start.x:r.end.x,c=a?r.end.x:r.start.x,h=o.snapToGrid;h?(n=o.ba(d).start,s=o.ba(c).end):a?(n=r.start.time,s=r.end.time):(n=r.end.time,s=r.start.time);var u=new DayPilot.Selection(n,s,l,o);return u.allowed=!t.div||!t.div.overlapping,u},this.Aa=function(){this.d.timeHeader={},o.elements.timeHeader.length>0&&(o.elements.timeHeader=[]);var t=r();t.style.position="relative",this.nav.timeHeader=t;for(var e=0;e<this.timeHeader.length;e++)for(var i=this.timeHeader[e],n=0;n<i.length;n++)this.Qd(n,e);var s=this.divNorth;1===s.childNodes.length?s.replaceChild(t,s.childNodes[0]):(s.innerHTML="",s.appendChild(t));var a=this.Q();s.style.width=a+5e3+"px",a>0&&(this.divStretch.style.width=a+"px")},this.Z=function(t,e){var i=null,n=this.f.Y();e=e||this.cellGroupBy;var s=t.start;switch(e){case"Minute":i=s.toString("m");break;case"Hour":i="Clock12Hours"===o.f.Rd()?s.toString("h tt",n):s.toString("H",n);break;case"Day":i=s.toString(n.datePattern);break;case"Week":i=1===l.Sd()?s.weekNumberISO():s.weekNumber();break;case"Month":i=s.toString("MMMM yyyy",n);break;case"Quarter":i="Q"+Math.floor(s.getMonth()/3+1);break;case"Year":i=s.toString("yyyy");break;case"None":i="";break;case"Cell":var r=(t.end.ticks-t.start.ticks)/6e4;i=this.Td(s,r);break;default:throw new DayPilot.Exception("Invalid groupBy value: "+e)}return i},this.Td=function(t,e){var i=this.f.Y();return e=e||this.cellDuration,e<1?t.toString("ss"):e<60?t.toString("mm"):e<1440?"Clock12Hours"===o.f.Rd()?t.toString("h tt",i):t.toString("H",i):e<10080?t.toString("d"):10080===e?1===l.Sd()?t.weekNumberISO():t.weekNumber():t.toString("MMMM yyyy",i);
},this.X=function(t,e,i){var n,s=o.startDate.addDays(o.days);e=e||this.cellGroupBy;var r=60;switch(e){case"Minute":t.getMinutes()+t.getSeconds()+t.getMilliseconds()>0&&(t=t.getDatePart().addHours(t.getHours()).addMinutes(t.getMinutes())),n=t.addMinutes(1);break;case"Hour":t.getHours()+t.getMinutes()+t.getSeconds()+t.getMilliseconds()>0&&(t=t.getDatePart().addHours(t.getHours())),n=t.addHours(1);break;case"Day":n=t.getDatePart().addDays(1);break;case"Week":for(n=t.getDatePart().addDays(1);n.dayOfWeek()!==l.Sd();)n=n.addDays(1);break;case"Month":t=t.getDatePart(),n=t.addMonths(1),n=n.firstDayOfMonth();for(var a=DayPilot.DateUtil.diff(n,t)/6e4%r===0;!a;)n=n.addHours(1),a=DayPilot.DateUtil.diff(n,t)/6e4%r===0;break;case"Quarter":for(t=t.getDatePart(),n=t.addMonths(1),n=n.firstDayOfMonth();n.getMonth()%3;)n=n.addMonths(1);for(var a=DayPilot.DateUtil.diff(n,t)/6e4%r===0;!a;)n=n.addHours(1),a=DayPilot.DateUtil.diff(n,t)/6e4%r===0;break;case"Year":t=t.getDatePart(),n=t.addYears(1),n=n.firstDayOfYear();for(var a=DayPilot.DateUtil.diff(n,t)/6e4%r===0;!a;)n=n.addHours(1),a=DayPilot.DateUtil.diff(n,t)/6e4%r===0;break;case"None":n=s;break;case"Cell":var d=this.da(t);d.current&&(n=d.current.end);break;default:throw i?new DayPilot.Exception("Invalid scale value: "+e):new DayPilot.Exception("Invalid groupBy value: "+e)}return n.getTime()>s.getTime()&&(n=s),n},this.Qd=function(t,e){var i=this.nav.timeHeader,n=this.timeHeader[e][t],s=e<this.timeHeader.length-1,a=n.left,l=n.width,d=e*o.headerHeight,c=o.headerHeight,h=r();h.style.position="absolute",h.style.top=d+"px",h.style.left=a+"px",h.style.width=l+"px",h.style.height=c+"px",n.toolTip&&(h.title=n.toolTip),h.setAttribute("aria-hidden","true"),n.cssClass&&DayPilot.Util.addClass(h,n.cssClass),h.style.userSelect="none",h.style.webkitUserSelect="none",h.oncontextmenu=function(){return!1},h.cell={},h.cell.start=n.start,h.cell.end=n.end,h.cell.level=e,h.cell.th=n,h.onclick=this.oc,h.oncontextmenu=this.pc,DayPilot.rePassive(h,DayPilot.touch.start,function(t){t.stopPropagation()}),h.style.overflow="hidden",o.timeHeaderTextWrappingEnabled||(h.style.whiteSpace="nowrap");var u=r();u.innerHTML=o.M(n.text,n.html),n.backColor&&(u.style.background=n.backColor),n.fontColor&&(u.style.color=n.fontColor);var v=this.I("_timeheadercol"),f=this.I("_timeheadercol_inner");s&&(v=this.I("_timeheadergroup"),f=this.I("_timeheadergroup_inner")),DayPilot.Util.addClass(h,v),DayPilot.Util.addClass(u,f),DayPilot.Util.addClass(h,o.I("_timeheader_cell")),DayPilot.Util.addClass(u,o.I("_timeheader_cell_inner")),h.appendChild(u),DayPilot.Areas.attach(h,n,{areas:n.areas}),this.d.timeHeader[t+"_"+e]=h,this.elements.timeHeader.push(h),i.appendChild(h)},this.Pb=function(){o.rowlist.forEach(function(t){var e=t.getHeight()+o.rowMarginTop+o.rowMarginBottom;t.height!==e&&(o.Ta=!0),t.height=e}),o.Ta&&(o.d.drawArea=null)},this.Ba=function(){o.rowlist.forEach(function(t){var e=o.divHeader;if(e){var i=t.index;if(e.rows[i]){var n=e.rows[i];o.ec&&(n.style.top=t.top+"px");var s=t.height;n&&n.firstChild&&parseInt(n.firstChild.style.height,10)!==s&&(n.firstChild.style.height=s+"px")}}}),o.ec&&o.nav.resScrollSpace&&(o.nav.resScrollSpace.style.top=o.b+"px")},this.Sc=function(t){if(DayPilot.Global.touch.start||DayPilot.Global.touch.active)return!1;if(o.la(t),"Disabled"===o.timeRangeSelectedHandling)return!1;var i=DayPilot.Util.mouseButton(t);if(o.Ud())return!1;if(i.middle||i.right)return!1;if(o.Vd(o.coords))return!1;var n=i.left?"left":i.right?"right":i.middle?"middle":"unknown";return o.Wd=n,e.Md=o.Nd(),e.Md&&(e.Xd=o),!1},this.Nd=function(){var t={},e=o.aa(o.coords.x).x,i=o.getDate(o.coords.x,!0);return t.start={y:o.ob(o.coords.y).i,x:e,"time":i},t.end={x:e,"time":i},t.calendar=o,o.hb(t),t},this.Uc=function(t){if(o.ha={},o.gb){if(DayPilot.Util.mouseButton(t).left){var i=o.gb;if(o.Vd(o.coords)){var n=function(t){return function(){e.Yd=null;var i=o.eb(t);if(i){var n={};n.start=i.start,n.end=i.end,n.resource=i.resource,n.preventDefault=function(){n.preventDefault.value=!0},"function"==typeof o.onTimeRangeClick&&o.onTimeRangeClick(n),n.preventDefault.value||"function"==typeof o.onTimeRangeClicked&&o.onTimeRangeClicked(n)}}};"Disabled"!==o.timeRangeClickHandling&&n(i)()}}}},this.Ud=function(){return!!(e.Ub||e.ha||e.Md)||!!o.ha.Hd},this.dragInProgress=function(){return o.Ud()},this.la=function(t){var e=DayPilot.mo3(o.n,t);e=e||{},e.stamp=e.x+"_"+e.y,o.coords&&o.coords.stamp===e.stamp||(o.coords=e)},this.Tc=function(t){if(!DayPilot.Global.touch.active){var i=DayPilot.mc(t);if(o.la(t),o.ha.Hd){DayPilot.distance(o.ha.Fd,i)>2&&(DayPilot.Util.copyProps(o.ha,e),s().style.cursor="move",o.ha={})}e.Ub&&e.Yb.calendar===o?(e.Ub.event||(e.Ub.event=e.Yb),o.Zd()):e._b?o.$d():e.Md&&e.Md.calendar===o&&(e.Md.moved=!0,o._d())}},this._d=function(){var t=e.Md,i=o.aa(o.coords.x).x,n=o.getDate(o.coords.x,!0);t.end={x:i,"time":n},o.hb(t)},this.Zd=function(){e.Xb||(e.Xb=o.sb(e.Ub)),o.Zb()},this.$d=function(){if(!e.ac){DayPilot.Util.addClass(e.ha,o.I("_event_moving_source"));var t=e._b;e.ac=o.sb(t)}o.$b()},this.Vc=function(t){return t.cancelBubble=!0,!1},this.Vd=function(t){var e=o.gb;if(!e||!e.start||!e.end)return!1;var i=this.ub(e.start.y),n=e.start.x<e.end.x,s=(n?e.start.x:e.end.x)*this.cellWidth,r=(n?e.end.x:e.start.x)*this.cellWidth+this.cellWidth,a=i.top,l=i.bottom;return t.x>=s&&t.x<=r&&t.y>=a&&t.y<=l},this.hb=function(t){function i(t){var e,i,l,d,c=t.end.time>t.start.time,h=t.start.y,u=t.start.time&&t.end.time;if(s||!u){var v=c?t.start.x:t.end.x,f=c?t.end.x:t.start.x,p=o.ba(v),b=o.ba(f);e=p.left,i=b.left+b.width}else c?(l=t.start.time,d=t.end.time):(l=t.end.time,d=t.start.time),e=o.getPixels(l).left,i=o.getPixels(d).left;var m=i-e,g=o.elements.range2;if(!g){g=r(),g.style.position="absolute";var y=r();y.className=o.I("_shadow_inner"),n&&(g.style.borderRadius=n,y.style.borderRadius=n),g.appendChild(y),o.divShadow.appendChild(g)}return g.className=o.I("_shadow"),g.firstChild.innerHTML="",g.style.left=e+"px",g.style.top=a[h].top+"px",g.style.width=m+"px",g.style.height=a[h].height-1+"px",g.calendar=o,o.elements.range2=g,g}if(t=t||e.Md){var n=o.eventBorderRadius;"number"==typeof n&&(n+="px");var s=o.snapToGrid,a=o.rowlist;i(t)}},this.ae=function(t){return{"start":{"x":t.start.x,"y":t.start.y,"time":t.start.time},"end":{"x":t.end.x,"time":t.end.time},"calendar":t.calendar,"args":t.args}},this.getCoords=function(){if(!o.coords)return null;var t={};t.x=o.coords.x,t.y=o.coords.y;var e=o.ob(t.y,t.grid).element;return t.row=o.nc(e),t.time=o.getDate(t.x,!0),t},this.qb={},this.qb.Ja=null,this.qb.drawCells=null,this.qb.drawRows=null,this.qb.click=null,this.qb.resClick=[],this.qb.updateFloats=null,this.Ka=function(){if(!o.a){o.Ha();var t=o.nav.scroll;if(o.ad=t.scrollLeft,o.bd=t.scrollTop,o.cd=t.clientWidth,o.divTimeScroll&&(o.divTimeScroll.scrollLeft=o.ad),DayPilot.browser.ios&&e.Lc?i():o.divResScroll.scrollTop=o.bd,o.progressiveRowRendering&&(o.qb.drawRows&&(clearTimeout(o.qb.drawRows),o.qb.drawRows=null),o.scrollDelayRows>0?o.qb.drawRows=setTimeout(function(){o.hc()},o.scrollDelayRows):o.hc()),o.qb.drawCells&&(clearTimeout(o.qb.drawCells),o.qb.drawCells=null),o.scrollDelayCells>0)o.qb.drawCells=setTimeout(o.be(),o.scrollDelayCells);else{o.be()()}o.qb.Ja&&(clearTimeout(o.qb.Ja),o.qb.Ja=null),o.scrollDelayEvents>0?o.qb.Ja=setTimeout(o.ce(),o.scrollDelayEvents):o.Ja(),o.qb.updateFloats&&(clearTimeout(o.qb.updateFloats),o.qb.updateFloats=null),o.scrollDelayFloats>0?o.qb.updateFloats=setTimeout(function(){o.z()},o.scrollDelayFloats):o.z(),o.onScrollCalled=!0}},this.be=function(){return function(){o&&o.Ia()}},this.ce=function(){return function(){o&&(o.rd()?setTimeout(function(){o.nd(),setTimeout(function(){o.Ja(!0)},50)},50):o.A())}},this.Ha=function(){o.d.drawArea=null},this.show=function(){o.visible=!0,o.c=!0,o.nav.top.style.display="",o.ee(),o.Qc(),o.Ka()},this.hide=function(){o.visible=!1,o.c=!1,o.nav.top.style.display="none"},this.Jb=function(t){if(!o.events.list)return null;for(var e=0;e<this.events.list.length;e++){var i=this.events.list[e];if(o.Bb(i,t)){var n={};return n.ex=i,n.index=e,n}}return null},this.fe=function(){var t=this.r(),e=t.xStart,i=t.xEnd-t.xStart,n=t.yStart,s=t.yEnd-t.yStart;this.cellProperties||(this.cellProperties={});for(var r=0;r<=i;r++){for(var a=e+r,o=0;o<s;o++){var l=n+o;this.ge(a,l)}this.he(a)}for(var d=this.cc(),l=d.start;l<d.end;l++)this.ie(l)},this.Ia=function(){if(!o.a){var t=o.rowlist;if(t&&t.length>0){if(this.cellSweeping){var e=this.cellSweepingCacheSize;this.pd(e)}this.fe()}this.Ta=!1}},this.r=function(){if(o.d.drawArea)return o.d.drawArea;if(!this.nav.scroll)return null;var t=o.bd,e={},i=l.td(),n=l.ed(),s=o.ad-i,r=s+o.cd+2*i,a=0,d=0;a=o.aa(s).x,d=o.aa(r,!0).x;var c=this.ib();d=Math.min(d,c-1),a=DayPilot.Util.atLeast(a,0);var h=t-n,u=t+this.nav.scroll.offsetHeight+2*n,v=this.ob(h).i,f=this.ob(u).i;f<this.rowlist.length&&f++,e.xStart=a,e.xEnd=d,e.yStart=v,e.yEnd=f;var p=o.nav.scroll;return 0===p.clientWidth&&(p=o.divTimeScroll),e.pixels={},e.pixels.left=p.scrollLeft,e.pixels.right=p.scrollLeft+p.clientWidth,e.pixels.top=p.scrollTop,e.pixels.bottom=p.scrollTop+p.clientHeight,e.pixels.width=p.scrollWidth,e.sw=DayPilot.sw(o.nav.scroll),o.d.drawArea=e,e},this.Q=function(){return o.ib()*o.cellWidth},this.ie=function(t){var e=o.rowlist,i=o.divLines,n="y_"+t;if(!this.d.linesHorizontal[n]){var s=e[t],a=s.height,l=s.top+a-1,d=this.Q(),c=r();c.style.left="0px",c.style.top=l+"px",c.style.width=d+"px",c.style.height="1px",c.style.fontSize="1px",c.style.lineHeight="1px",c.style.overflow="hidden",c.style.position="absolute",c.className=this.I("_matrix_horizontal_line"),i.appendChild(c),this.d.linesHorizontal[n]=c}},this.he=function(t){var e=o.ba(t);if(e){var i=o.divLines,n=o.b,s="x_"+t;if(!this.d.linesVertical[s]){var a=e.left+e.width-1,l=r();l.style.left=a+"px",l.style.top="0px",l.style.width="1px",l.style.height=n+"px",l.style.fontSize="1px",l.style.lineHeight="1px",l.style.overflow="hidden",l.style.position="absolute",l.className=this.I("_matrix_vertical_line"),i.appendChild(l),this.elements.linesVertical.push(l),this.d.linesVertical[s]=l}}},this.xa=function(){o.b=o.je(o.rowlist)},this.je=function(t){for(var e=0,i=0;i<t.length;i++){var n=t[i];n.top=e,e+=n.height}return e},this.Fa=function(){o.elements.cells=[],o.d.cells=[],o.divCells.innerHTML="",o.ke()},this.ke=function(){o.divLines.innerHTML="",o.d.linesVertical={},o.d.linesHorizontal={},o.elements.linesVertical=[]},this.Xa=function(t){var e=[];for(var i in o.d.cells)e.push(o.d.cells[i]);e.filter(function(e){return e&&e.coords&&e.coords.y===t}).forEach(function(t){o.qd(t)})},this.ge=function(t,e){if(this.l){var i=o.ba(t);if(i){var n=o.rowlist,s=o.divCells,a=t+"_"+e;if(!this.d.cells[a]){var l=this.le(t,e),d=o.me(t,e),c=r();if(c.style.left=i.left+"px",c.style.top=n[e].top+"px",c.style.width=i.width+"px",c.style.height=n[e].height+"px",c.style.position="absolute",l&&l.backColor&&(c.style.backgroundColor=l.backColor),c.className=this.I("_cell"),c.coords={},c.coords.x=t,c.coords.y=e,l){if(l.cssClass&&DayPilot.Util.addClass(c,l.cssClass),c.innerHTML=o.M(l.text,l.html),l.backImage&&(c.style.backgroundImage='url("'+l.backImage+'")'),l.backRepeat&&(c.style.backgroundRepeat=l.backRepeat),l.business&&o.cellsMarkBusiness&&DayPilot.Util.addClass(c,o.I("_cell_business")),l.disabled&&DayPilot.Util.addClass(c,o.I("_cell_disabled")),l.backColor&&(c.style.backgroundColor=l.backColor),l.fontColor&&(c.style.color=l.fontColor),l.horizontalAlignment||l.verticalAlignment){switch(c.style.display="flex",l.horizontalAlignment){case"right":c.style.justifyContent="flex-end";break;case"left":c.style.justifyContent="flex-start";break;case"center":c.style.justifyContent="center"}switch(l.verticalAlignment){case"center":c.style.alignItems="center";break;case"top":c.style.alignItems="flex-start";break;case"bottom":c.style.alignItems="flex-end"}}DayPilot.Areas.attach(c,d.cell,{"areas":l.areas})}var h={start:i.start,end:i.end,resource:n[e].id,div:c,properties:l,x:t,y:e};!function(){if("function"==typeof o.onBeforeCellDomAdd||"function"==typeof o.onBeforeCellDomRemove){var t={};if(t.control=o,t.cell=h,t.element=null,c.domArgs=t,"function"==typeof o.onBeforeCellDomAdd&&o.onBeforeCellDomAdd(t),t.element){var e=c;if(e){t.hd=e;var i=DayPilot.Util.isReactComponent(t.element),n=DayPilot.Util.isVueVNode(t.element);if(i){if(!o.K.reactDOM)throw new DayPilot.Exception("Can't reach ReactDOM");o.K.L(t.element,e)}else if(n){if(!o.kd.jd)throw new DayPilot.Exception("Can't reach Vue");o.kd.ld=!0,o.kd.Bd(t.element,e),o.kd.ld=!1}else e.appendChild(t.element)}}}}(),s.appendChild(c),this.elements.cells.push(c),this.d.cells[a]=c}}}},this.me=function(t,e){var i=o.ba(t);if(!i)return null;var n=o.rowlist[e],s=n.id,r=i.start,a=i.end,l={};if(l.cell={x:t,y:e,start:r,end:a,resource:s,row:o.nc(n),properties:o.le(t,e)},l.control=o,"function"==typeof this.onBeforeCellRender){var d=t+"_"+e;if(o.beforeCellRenderCaching&&o.Ga[d])return l;o.Ga[d]=!0,this.onBeforeCellRender(l)}return l},this.clearSelection=function(){this.ne()},this.oe=function(t,e,i){t=new DayPilot.Date(t),e=new DayPilot.Date(e);var n=o.p(i),s=o.da(t);if(!s.current)throw new DayPilot.Exception("Time range selection 'start' out of timeline");var r=o.da(new DayPilot.Date(e).addMilliseconds(-1));if(!r.current)throw new DayPilot.Exception("Time range selection 'end' out of timeline");var a={};return a.start={y:n.index,x:s.i,"time":t},a.end={x:r.i,"time":e},a.calendar=this,a},this.selectTimeRange=function(t,e,i,n){var s=o.oe(t,e,i);o.hb(s),n||setTimeout(function(){o.cb(s)},0)},this.ab=function(){var t=e.ac&&e.ac.source;t&&DayPilot.Util.removeClass(t,o.I("_event_moving_source")),DayPilot.de(e.ac),e.ac=null,DayPilot.Global.movingLink&&(DayPilot.Global.movingLink.clear(),DayPilot.Global.movingLink=null)},this.ne=function(){o.divShadow&&(o.divShadow.innerHTML=""),o.elements.range=[],o.elements.range2=null,o.gb=null,o.pe=null},l.va=function(){delete o.d.headerHeight},l.Cd=function(){return"Disabled"!==o.xssProtection},l.Y=function(){return DayPilot.Locale.find(o.locale)},l.Rd=function(){return"Auto"!==o.timeFormat?o.timeFormat:l.Y().timeFormat},l.Sd=function(){if("Auto"===o.weekStarts){var t=l.Y();return t?t.weekStarts:0}return o.weekStarts||0},l.jc=function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("mobile")!==-1||t.indexOf("android")!=-1},l.Sb=function(t){return"Always"===o.useEventBoxes||"Never"!==o.useEventBoxes&&t<60*o.ea()*1e3},l.td=function(){var t=o.dynamicEventRenderingMarginX;if("number"==typeof t)return t;var e=o.dynamicEventRenderingMargin;return"number"==typeof e?e:0},l.ed=function(){var t=o.dynamicEventRenderingMarginY;if("number"==typeof t)return t;var e=o.dynamicEventRenderingMargin;return"number"==typeof e?e:0},this.le=function(t,e){var i=t+"_"+e,n=o.rowlist;if(this.cellProperties||(this.cellProperties={}),this.cellProperties[i])return this.cellProperties[i];if(!this.cellProperties[i]){var s=n[e],r=s.id,a=o.ba(t),l=a.start,d=a.end,c={};c.start=l,c.end=d,c.resource=r;var h={};h.business=o.isBusiness(c),this.cellProperties[i]=h}return this.cellProperties[i]},this.isBusiness=function(t,e){var i=t.start,n=t.end,s=(n.getTime()-i.getTime())/6e4;if(s<=1440&&!(o.businessWeekends||e||0!==t.start.dayOfWeek()&&6!==t.start.dayOfWeek()))return!1;if(s<720){var r=i.getHours();r+=i.getMinutes()/60,r+=i.getSeconds()/3600,r+=i.getMilliseconds()/36e5;var a=this.businessBeginsHour,l=this.businessEndsHour;if(0===l&&(l=24),a===l)return!1;if(!(a<l))return r<l||r>=a;if(r<a)return!1;if(l>=24)return!0;if(r>=l)return!1}return!0},this.ee=function(){"hidden"===this.nav.top.style.visibility&&(this.nav.top.style.visibility="visible")},this.qe=function(t){this.heightSpec="Fixed",this.height=t-(this.U()+2),this.S()},this.setHeight=this.qe,this.p=function(t){return o.rc(t)[0]},this.se=function(){if(this.id&&this.id.tagName)this.nav.top=this.id;else{if("string"!=typeof this.id)throw new DayPilot.Exception("DayPilot.Scheduler() constructor requires the target element or its ID as a parameter");if(this.nav.top=document.getElementById(this.id),!this.nav.top)throw new DayPilot.Exception("DayPilot.Scheduler: The placeholder element not found: '"+n+"'.")}},this.init=function(){if(this.l)throw new DayPilot.Exception("This instance is already initialized. Use update() to change properties.");if(this.se(),this.nav.top.dp){if(this.nav.top.dp===o)return o;throw new DayPilot.Exception("The target placeholder was already initialized by another DayPilot component instance.")}return this.te(),this.Pc(),this},this.te=function(){this.Ac(),this.Wc(),this.pb(),this._c(),this.qa();var angular=o.P.enabled;o.scrollToDate?o.scrollTo(o.scrollToDate):o.scrollX||o.scrollY?o.setScroll(o.scrollX,o.scrollY):angular||o.Ka(),o.scrollToResourceId&&(o.scrollToResource(o.scrollToResourceId),o.scrollToResourceId=null);var t=function(){o.scrollY&&o.setScroll(o.scrollX,o.scrollY)};setTimeout(t,200),this.Ha(),this.Oa(),this.l=!0;var e=o.m;e?o.scrollTo(e):o.Ka()},this.ve=null,this.Na=function(t){if(t){var e={"resources":{"preInit":function(){var t=this.data;t&&(o.resources=t)}},"events":{"preInit":function(){var t=this.data;t&&(DayPilot.isArray(t.list)?o.events.list=t.list:o.events.list=t)},"postInit":function(){}},"scrollTo":{"preInit":function(){},"postInit":function(){this.data&&o.k(this.data)}},"scrollX":{"postInit":function(){this.data&&o.o(this.data)}},"scrollY":{"postInit":function(){this.data&&o.R(this.data)}}};o.ve=e,o.P.scrollToRequested&&(e.scrollTo.data=o.P.scrollToRequested,o.P.scrollToRequested=null),o.P.scrollXRequested&&(e.scrollX.data=o.P.scrollXRequested,o.P.scrollXRequested=null),o.P.scrollYRequested&&(e.scrollY.data=o.P.scrollYRequested,o.P.scrollYRequested=null);for(var i in t)e[i]||(o[i]=t[i]);for(var n in t)if(e[n]){var s=e[n];s.data=t[n],s.preInit&&s.preInit()}}},this.Oa=function(){var t=o.ve;for(var e in t){var i=t[e];i.postInit&&i.postInit()}o.ve={}},this.K={},this.K.reactDOM=null,this.K.react=null,this.K.L=function(t,e){var i=o.K.reactDOM;if("function"==typeof i.createRoot){var n=e.we;n||(n=i.createRoot(e),e.we=n),n.render(t)}else i.render(t,e)},this.K.O=function(t){var e=o.K.reactDOM;if("function"==typeof e.createRoot){var i=t.we;setTimeout(function(){i.unmount(),t.we=null},0)}else e.unmountComponentAtNode(t)},this.kd={},this.kd.jd=null,this.kd.xe=function(t,e,i){var n=o.kd.jd;if("function"==typeof n.createVNode&&"function"==typeof n.render){var s=n.createVNode(t,i);n.render(s,e)}},this.kd.Bd=function(t,e){var i=o.kd.jd;if("function"==typeof i.render){var n=t;DayPilot.isArray(t)&&(n=i.h("div",null,t)),i.render(n,e)}},this.kd.md=function(t){var e=o.kd.jd;"function"==typeof e.render&&e.render(null,t)},this.internal={},this.internal.adjustEndIn=o.Ya,this.internal.adjustEndNormalize=o.Za,this.internal.xssTextHtml=o.M,this.internal.touch=o.g,this.internal.skipUpdate=o.P.skipUpdate,this.internal.skipped=o.P.skipped,this.internal.loadOptions=o.Na,this.internal.postInit=o.Oa,this.internal.enableAngular2=function(){o.P.enabled=!0},this.internal.eventsFromAttr=function(){o.P.Hb=!0},this.internal.resourcesFromAttr=function(){o.P.Qb=!0},this.internal.evImmediateRefresh=function(){o.events.bb()},this.internal.enableReact=function(t,e){o.K.react=t,o.K.reactDOM=e},this.internal.reactRefs=function(){return DayPilot.Util.copyProps(o.K,{},["react","reactDOM"])},this.internal.enableVue=function(t){o.kd.jd=t},this.internal.vueRef=function(){return o.kd.jd},this.internal.vueRendering=function(){return o.kd.ld},this.Na(a)},n="${v}"===(new DayPilot.Scheduler).v,DayPilot.Row=function(t,e){if(!t)throw new DayPilot.Exception("Now row object supplied when creating DayPilot.Row");if(!e)throw new DayPilot.Exception("No parent control supplied when creating DayPilot.Row");this.ye={};var i=this.ye;i.id=t.id,i.name=t.name,i.data=t.resource,i.tags=t.tags;var n=this;n.isRow=!0,n.menuType="resource",n.name=t.name,n.id=t.id,n.tags=t.tags,n.index=t.index,n.calendar=e,n.data=t.resource,n.ze=t,n.$={},n.$.row=t,n.toJSON=function(){var t={};return t.start=this.start,t.name=this.name,t.id=this.id,t.index=this.index,t},n.events={},n.events.all=function(){for(var t=[],e=0;e<n.ze.events.length;e++)t.push(n.ze.events[e]);return t},n.events.isEmpty=function(){return 0===n.ze.events.length},n.events.forRange=function(t,e){return n.ze.events.forRange(t,e)},n.events.totalDuration=function(){var t=0;return n.events.all().forEach(function(e){t+=e.part.end.getTime()-e.part.start.getTime()}),new DayPilot.Duration(t)},n.remove=function(){e.rows.remove(n)},n.addClass=function(t){var i=e.divHeader,s=i.rows[n.index];DayPilot.Util.addClass(s,t),n.$.row.cssClass=DayPilot.Util.addClassToString(n.$.row.cssClass,t),n.data.cssClass=t},n.removeClass=function(t){var i=e.divHeader,s=i.rows[n.index];DayPilot.Util.removeClass(s,t),n.$.row.cssClass=DayPilot.Util.removeClassFromString(n.$.row.cssClass,t),n.data.cssClass=DayPilot.Util.removeClassFromString(n.data.cssClass,t)}},e.ha=null,e._b=null,e.Fd=null,e.Ub=null,e.Yb=null,e.ga=!1,e.Xc=!1,e.Yd=null,e.Ae=null,e.rb=function(){DayPilot.ue(document,"mouseup",e.Yc),DayPilot.ue(document,"touchmove",e.Zc),DayPilot.ue(document,"touchend",e.$c),e.Xc=!1},e.Zc=function(t){if(e.Ub){var i=e.Ub.event.calendar;i.coords=i.g.Jd(t),i.g.Od(),t.preventDefault()}if(e.ha){t.preventDefault();var i=e._b.calendar;i.coords=i.g.Jd(t),i.g.Pd()}},e.$c=function(t){e.Lc=!1,e.Yc(t)},e.Yc=function(t){if(e.Ub){var n=function(){var t=e.Yb,i=t.calendar;s().style.cursor="",e.Ub=null,e.Yb=null,DayPilot.de(e.Xb),e.Xb=null,i&&(i.Be=null)};if(setTimeout(function(){e.ga=!1}),!e.Xb)return void n();var r=e.Yb,a=r.calendar,o=e.Xb.start,l=e.Xb.end,d="left"===e.Ub.dpBorder?"start":"end";n(),a.na(r,o,l,d)}else if(e._b){var n=function(){DayPilot.Global.movingAreaData=null;var t=e.ac&&e.ac.calendar;e.ac&&(DayPilot.de(e.ac),e.ac.calendar=null),s().style.cursor="",e.ha=null,e._b=null,t&&(t._a=null)};if(!e.ac)return void n();var r=e._b,a=e.ac.calendar;if(!a)return void n();if(e.ac.source=e.ha,!e.ac.row)return void n();var o=e.ac.start,l=e.ac.end,c=e.ac.row.id;e.ac.calendar=null,s().style.cursor="",e.ha=null,e._b=null,a.$a(r,o,l,c,t),DayPilot.Global.movingAreaData=null}else if(e.Md){var h=DayPilot.Util.mouseButton(t),u=e.Md,v=u.calendar,n=function(){};if(v.pe=null,e.Yd)return clearTimeout(e.Yd),e.Yd=null,void n();v.gb=u,e.Md=null;var f=function(t){return function(){e.Yd=null,v.cb(t),"Hold"!==v.timeRangeSelectedHandling&&"HoldForever"!==v.timeRangeSelectedHandling?i():v.gb=t}},p=v.ae(u);return n(),h.left?(f(p)(),t.cancelBubble=!0,!1):void(e.Yd=null)}e.Id=null,e.Tb=null}}}(DayPilot);